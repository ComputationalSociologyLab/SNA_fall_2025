[
  {
    "objectID": "W9_presentation.html#setting-up-the-session",
    "href": "W9_presentation.html#setting-up-the-session",
    "title": "W9. Positions and Roles",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nImport igraph package for network analysis\n\n\nlibrary(igraph)"
  },
  {
    "objectID": "W9_presentation.html#setting-up-the-session-1",
    "href": "W9_presentation.html#setting-up-the-session-1",
    "title": "W9. Positions and Roles",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nLoad attribute dataset\n\n\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/class182_attributedata.csv\"\nclass182_attributes &lt;- read.csv(file = url2)\nhead(class182_attributes)\n\n  ids  race grade gender\n1   1 white    10   male\n2   2 black    10 female\n3   3 white    10 female\n4   4 white    11 female\n5   5 white    10   male\n6   6 white    10 female"
  },
  {
    "objectID": "W9_presentation.html#setting-up-the-session-2",
    "href": "W9_presentation.html#setting-up-the-session-2",
    "title": "W9. Positions and Roles",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nLoad edgelist dataset where there exists friend tie between students\n\n\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/class182_networkdata.csv\"\nclass182_networkdata &lt;- read.csv(file = url1)\nhead(class182_networkdata) \n\n  ego alter friend_tie social_tie task_tie\n1   1     1          0        0.0      0.0\n2   1     2          0        0.0      0.0\n3   1     3          0        0.0      0.0\n4   1     4          0        0.0      0.0\n5   1     5          0        1.2      0.3\n6   1     6          0        0.0      0.0"
  },
  {
    "objectID": "W9_presentation.html#setting-up-the-session-3",
    "href": "W9_presentation.html#setting-up-the-session-3",
    "title": "W9. Positions and Roles",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nConstrcut a directed network for freinds tie\n\n\nedgelist_friendship &lt;- class182_networkdata[class182_networkdata$friend_tie &gt; 0, \n                                            c(\"ego\", \"alter\", \"friend_tie\")]\nnet182_friend &lt;- graph_from_data_frame(d = edgelist_friendship, directed = T, \n                                       vertices = class182_attributes)"
  },
  {
    "objectID": "W9_presentation.html#setting-up-the-session-4",
    "href": "W9_presentation.html#setting-up-the-session-4",
    "title": "W9. Positions and Roles",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nConstruct a undirected network for task tie\n\n\nedgelist_task &lt;- class182_networkdata[class182_networkdata$task_tie &gt; 0,\n                                        c(\"ego\", \"alter\", \"task_tie\")]\nnet182_task &lt;- graph_from_data_frame(d = edgelist_task, directed = T,\n                                     vertices = class182_attributes) \nnet182_task &lt;- as_undirected(net182_task, mode=\"collapse\", \n                             edge.attr.comb = \"mean\")"
  },
  {
    "objectID": "W9_presentation.html#setting-up-the-session-5",
    "href": "W9_presentation.html#setting-up-the-session-5",
    "title": "W9. Positions and Roles",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nConstruct a undirected network for social tie\n\n\nedgelist_social &lt;- class182_networkdata[class182_networkdata$social_tie &gt; 0, \n                                      c(\"ego\", \"alter\", \"social_tie\")]\n\nnet182_social &lt;- graph_from_data_frame(d = edgelist_social, directed = T, \n                                       vertices = class182_attributes) \n\nnet182_social &lt;- as_undirected(net182_social, mode=\"collapse\", \n                               edge.attr.comb = \"mean\")"
  },
  {
    "objectID": "W9_presentation.html#getting-data-ready",
    "href": "W9_presentation.html#getting-data-ready",
    "title": "W9. Positions and Roles",
    "section": "Getting Data Ready",
    "text": "Getting Data Ready\n\nCluster nodes which have similar positions\n\n‚ÄúSimilar‚Äù is based on the idea of structural equivalence\nNodes who are friends with the same people, do tasks with the same people, should be in the same position.\n\nCalculate the distance btw the nodes based on the type of relationships(social, friends, tasks)"
  },
  {
    "objectID": "W9_presentation.html#getting-data-ready-1",
    "href": "W9_presentation.html#getting-data-ready-1",
    "title": "W9. Positions and Roles",
    "section": "Getting Data Ready",
    "text": "Getting Data Ready\n\nConvert the networks into adjacency matrix\n\n\nfriend_mat &lt;- as_adjacency_matrix(net182_friend, attr = \"friend_tie\", sparse = F) \ntask_mat &lt;- as_adjacency_matrix(net182_task, attr = \"task_tie\", sparse = F)\nsocial_mat &lt;- as_adjacency_matrix(net182_social, attr = \"social_tie\", sparse = F)"
  },
  {
    "objectID": "W9_presentation.html#getting-data-ready-2",
    "href": "W9_presentation.html#getting-data-ready-2",
    "title": "W9. Positions and Roles",
    "section": "Getting Data Ready",
    "text": "Getting Data Ready\n\nStandardize our columns so they are comparable \\[\nZ = \\frac{X - \\mu}{\\sigma}\n\\]\n\n\nfriend_mat_in &lt;- t(friend_mat)\nfriend_mat_std &lt;- (friend_mat - mean(friend_mat)) / sd(friend_mat)\nfriend_mat_in_std &lt;- t(friend_mat_std) # for the incoming friendship ties\ntask_mat_std &lt;- (task_mat - mean(task_mat)) / sd(task_mat)\nsocial_mat_std &lt;- (social_mat - mean(social_mat)) / sd(social_mat)"
  },
  {
    "objectID": "W9_presentation.html#getting-data-ready-3",
    "href": "W9_presentation.html#getting-data-ready-3",
    "title": "W9. Positions and Roles",
    "section": "Getting Data Ready",
    "text": "Getting Data Ready\n\nCombine all of the standardized matrices into one matrix.\n\n\nfriends_task_social_std &lt;- cbind(friend_mat_std, friend_mat_in_std, \n                                 task_mat_std, social_mat_std)\nfriends_task_social &lt;- cbind(friend_mat, friend_mat_in, task_mat, social_mat) \n# (16*16 adjacent matrix) * 4\ndim(friends_task_social_std) \n\n[1] 16 64"
  },
  {
    "objectID": "W9_presentation.html#structural-equivalence",
    "href": "W9_presentation.html#structural-equivalence",
    "title": "W9. Positions and Roles",
    "section": "Structural Equivalence",
    "text": "Structural Equivalence\n\nBased on the four adjacent matrix(16*16), we can calculate the distance between each node\nhow different/similar each node(student) is to every other node.\n\n\neuclid_dist &lt;- dist(x = friends_task_social_std, method = \"euclidean\") \neuclid_dist\n\n           1         2         3         4         5         6         7\n2  12.277092                                                            \n3   9.337925 12.666789                                                  \n4   8.125464 10.447252  8.035579                                        \n5  11.104733 12.728916  9.647258  9.121137                              \n6  10.678168 12.565643  9.919998  8.088631  8.720639                    \n7   8.890135  7.850717  9.402618  6.784490 10.162484 10.479959          \n8  10.349860  7.464200  9.522193  8.039333 12.013896 10.297088  6.933562\n9  11.124331 13.784948 12.511439 10.298732 12.110515 10.470634 11.854747\n10  7.052583 11.970673  8.885192  8.234908 10.597375 10.001802  9.733430\n11 10.406593 13.215125  9.147026  8.618923 10.459737  8.211965 10.579496\n12  6.916288 12.388970 10.242419  9.154222 11.949265 11.860957 10.175290\n13 11.915949 11.955712 12.930734 10.482529 13.132799 12.897925  8.143778\n14  9.548177  8.919780 10.645521  7.001845  9.814018  9.120023  6.009304\n15  7.685769 11.528159 11.324092  8.700158 11.173555 10.468069 10.074406\n16 14.160821 15.140840 14.241848 11.869697 14.696566 14.161035 13.150494\n           8         9        10        11        12        13        14\n2                                                                       \n3                                                                       \n4                                                                       \n5                                                                       \n6                                                                       \n7                                                                       \n8                                                                       \n9  12.346245                                                            \n10 10.388199  9.711395                                                  \n11 10.744884 11.878246 10.115245                                        \n12 11.115321 11.186167  7.327656 11.847435                              \n13  9.159214 14.384530 12.409627 13.472127 13.132353                    \n14  7.686441 11.092270  9.562528 10.321041 10.841942  7.631703          \n15 11.100016  9.998283  6.135059 11.502730  7.631501 12.001112  9.012054\n16 13.698101 14.748241 14.138346 14.396936 14.307963 15.152258 13.497085\n          15\n2           \n3           \n4           \n5           \n6           \n7           \n8           \n9           \n10          \n11          \n12          \n13          \n14          \n15          \n16 14.495992"
  },
  {
    "objectID": "W9_presentation.html#defining-positions",
    "href": "W9_presentation.html#defining-positions",
    "title": "W9. Positions and Roles",
    "section": "Defining Positions",
    "text": "Defining Positions\n\nCluster the students into structurally equivalent positions based on the euclid distance\n\n\nhc &lt;- hclust(euclid_dist)\nhc_ids &lt;- cutree(hc, h = 12)  \nplot(hc)\nplot_clusters &lt;- rect.hclust(hc, h = 12)"
  },
  {
    "objectID": "W9_presentation.html#role-analysis",
    "href": "W9_presentation.html#role-analysis",
    "title": "W9. Positions and Roles",
    "section": "Role Analysis",
    "text": "Role Analysis\n\nAnalyze the pattern of ties between positions(clusters)\nex) a ‚Äòteacher‚Äô positions has certain rights and responsibilities relative to actors playing the ‚Äòstudent‚Äô positions"
  },
  {
    "objectID": "W9_presentation.html#role-analysis-with-blockmodel",
    "href": "W9_presentation.html#role-analysis-with-blockmodel",
    "title": "W9. Positions and Roles",
    "section": "Role Analysis with Blockmodel",
    "text": "Role Analysis with Blockmodel\n\nAll actors fall into a position(here, cluster, block)\nCreate a matrix btw the blocks"
  },
  {
    "objectID": "W9_presentation.html#role-analysis-with-blockmodel-1",
    "href": "W9_presentation.html#role-analysis-with-blockmodel-1",
    "title": "W9. Positions and Roles",
    "section": "Role Analysis with Blockmodel",
    "text": "Role Analysis with Blockmodel\n\nPass the matrix and the cluster for the parameter of the function blockmodel\n\n\nlibrary(sna)\nblockmod_friend &lt;- blockmodel(friend_mat, ec = hc_ids)\nblockmod_task &lt;- blockmodel(task_mat, ec = hc_ids)\nblockmod_social &lt;- blockmodel(social_mat, ec = hc_ids)"
  },
  {
    "objectID": "W9_presentation.html#role-analysis-with-blockmodel-2",
    "href": "W9_presentation.html#role-analysis-with-blockmodel-2",
    "title": "W9. Positions and Roles",
    "section": "Role Analysis with Blockmodel",
    "text": "Role Analysis with Blockmodel\n\nBlockmodel shows us the density of within and between block ties\n\n\nblockmod_friend\n\n\nNetwork Blockmodel:\n\nBlock membership:\n\n 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 \n 1  2  3  2  3  3  2  2  1  1  3  1  2  2  1  4 \n\nReduced form blockmodel:\n\n     1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \n        Block 1    Block 2    Block 3 Block 4\nBlock 1     0.9 0.03333333 0.05000000       0\nBlock 2     0.1 0.66666667 0.08333333       0\nBlock 3     0.4 0.12500000 1.16666667       0\nBlock 4     0.0 0.00000000 0.00000000     NaN"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel",
    "href": "W9_presentation.html#plotting-a-blockmodel",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nLet‚Äôs interprete the results of blockmodel with visualization\n\n\n# function returning edgelist between blocks\nblock_model_edgelist &lt;- function(block_model, relation_label, directed = T){\n  # input: blockmodel object, label for type of tie, direction\n  # output : weighted edgelist btw the blocks\n  \n\n  # First we grab the actual matrix from the blockmodel:\n  block_mat &lt;- block_model$block.model\n\n  # Here we set any NA to 0.\n  block_mat[is.na(block_mat)] &lt;- 0\n\n  # Now we create a little network based on the matrix.\n  net_block &lt;- network(block_mat, loops = T, \n                       directed = directed)\n\n  # Here we extract the edgelist:\n  edges_netblock &lt;- as.edgelist(net_block)\n\n  # Now we get the edge weights, stringing out the matrix\n  # into a vector. We only extract those weights corresponding\n  # to where an edge exists, defined by the edgelist \n  # extracted above.\n  weight_edge &lt;- c(block_mat[edges_netblock])\n\n  # Now we create a little data frame putting the information together.\n  block_edgelist &lt;- data.frame(edges_netblock, weight = weight_edge, \n                               Tie = relation_label)\n\n  # Here we create the additional weighting scheme,\n  # where weight is equal to 0, 1, or 2, depending if it is\n  # less than the mean, greater than the mean (but less than 1 sd above mean)\n  # or greater than 1 sd above the mean. \n  edge_mean &lt;- mean(block_mat)\n  edge_sd &lt;- sd(block_mat)\n  edge_max &lt;- max(block_mat)\n\n  block_edgelist$WeightRecode &lt;- cut(block_edgelist$weight, \n                                     breaks = c(0, edge_mean, \n                                                edge_mean + edge_sd, \n                                                edge_max),\n                                     include.lowest = T, \n                                     right = F, labels = c(\"0\", \"1\", \"2\")) \n\n  block_edgelist$WeightRecode &lt;- as.character(block_edgelist$WeightRecode)\n  block_edgelist$WeightRecode &lt;-as.numeric(block_edgelist$WeightRecode)\n\n  colnames(block_edgelist)[1:2] &lt;- c(\"sender\", \"receiver\")\n\n  block_edgelist\n}"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-1",
    "href": "W9_presentation.html#plotting-a-blockmodel-1",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nCreate the edgelist for the friendship relation:\n\n\nblockedges_friend &lt;- block_model_edgelist(block_model = blockmod_friend, \n                                          relation_label = \"friendship\",\n                                          directed = T)\nblockedges_friend\n\n  sender receiver     weight        Tie WeightRecode\n1      1        1 0.90000000 friendship            2\n2      1        2 0.03333333 friendship            0\n3      1        3 0.05000000 friendship            0\n4      2        1 0.10000000 friendship            0\n5      2        2 0.66666667 friendship            2\n6      2        3 0.08333333 friendship            0\n7      3        1 0.40000000 friendship            1\n8      3        2 0.12500000 friendship            0\n9      3        3 1.16666667 friendship            2"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-2",
    "href": "W9_presentation.html#plotting-a-blockmodel-2",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nCreate the edgelist for the friendship relation:\n\n\nblockedges_task &lt;- block_model_edgelist(block_model = blockmod_task,\n                                        relation_label = \"task\", \n                                        directed = F)\n\nblockedges_social &lt;- block_model_edgelist(block_model = blockmod_social,\n                                          relation_label = \"social\", \n                                          directed = F)"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-3",
    "href": "W9_presentation.html#plotting-a-blockmodel-3",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\nAnd now we put together the three edgelists\n\n# stacking block edgelist using an `rbind()` function. \nblock_dat &lt;- rbind(blockedges_friend, blockedges_task, blockedges_social)\nblock_dat &lt;- block_dat[block_dat$WeightRecode %in% c(\"1\", \"2\"), ]"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-4",
    "href": "W9_presentation.html#plotting-a-blockmodel-4",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nConstruct a network with the conbined block edgelist\n\n\nblockmod_edges &lt;- as.matrix(block_dat[, c(\"sender\", \"receiver\")])\nblockmod_igraph &lt;- graph_from_edgelist(blockmod_edges, directed = T)"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-5",
    "href": "W9_presentation.html#plotting-a-blockmodel-5",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nSet tie attributes to constructed network\n\n\nlibrary(car)\n# type of tie\nE(blockmod_igraph)$type &lt;- block_dat[, \"Tie\"]\n# color for each type of tie\ncols &lt;- recode(block_dat[, \"Tie\"], \n               \"'friendship' = 'red'; 'task'='blue'; 'social' = 'green'\")\nE(blockmod_igraph)$color &lt;- cols\nE(blockmod_igraph)$width &lt;- block_dat[, \"WeightRecode\"]"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-6",
    "href": "W9_presentation.html#plotting-a-blockmodel-6",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nSet tie attributes to constructed network\n\n\nfriend_edge &lt;- E(blockmod_igraph)$type %in% \"friendship\"\nself_loop &lt;- which_loop(blockmod_igraph)\narrow_mode &lt;- ifelse(friend_edge & !self_loop, yes = \"&gt;\", no = \"-\")"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-7",
    "href": "W9_presentation.html#plotting-a-blockmodel-7",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nTweak the plotting of the loops\n\n\nedge_loop_angles &lt;- rep(0, nrow(block_dat))\nedge_loop_angles[self_loop & friend_edge] &lt;- 4 * pi / 3\nsocial_edge &lt;- E(blockmod_igraph)$type %in% \"social\"\nedge_loop_angles[self_loop & social_edge] &lt;- 3 * pi / 3"
  },
  {
    "objectID": "W9_presentation.html#plotting-a-blockmodel-8",
    "href": "W9_presentation.html#plotting-a-blockmodel-8",
    "title": "W9. Positions and Roles",
    "section": "Plotting a Blockmodel",
    "text": "Plotting a Blockmodel\n\nplot(blockmod_igraph, edge.arrow.mode = arrow_mode,\n     edge.arrow.size = .65, edge.arrow.width = .75,\n     vertex.label = c(\"block 1\", \"block 2\", \"block 3\", \"block 4\"),\n     vertex.label.dist = 4.5, vertex.label.degree = 0,\n     edge.loop.angle = edge_loop_angles, margin = .20)\n\nlegend(\"left\", c(\"friendship\", \"task\", \"social\"),\n       col = c(\"red\", \"blue\", \"green\"),\n       lwd = 1, cex = .8)"
  },
  {
    "objectID": "W9_presentation.html#done",
    "href": "W9_presentation.html#done",
    "title": "W9. Positions and Roles",
    "section": "Done!",
    "text": "Done!\n\nPlease check KLMS for the assignment of this week(til Friday)\nIf you want to study in-depth knowledge for analyzing the Blockmodel and Local Equivalence, please check this week [Option] in the assignment"
  },
  {
    "objectID": "W5_presentation.html#load-dataset",
    "href": "W5_presentation.html#load-dataset",
    "title": "W5. Network Cohesion and Communities",
    "section": "Load dataset",
    "text": "Load dataset\n\nuse primarily with the igraph package. We will also load ggplot2 to draw a network.\n\n\nlibrary(igraph)\nlibrary(ggplot2)"
  },
  {
    "objectID": "W5_presentation.html#load-dataset-1",
    "href": "W5_presentation.html#load-dataset-1",
    "title": "W5. Network Cohesion and Communities",
    "section": "Load dataset",
    "text": "Load dataset\n\nread in the classroom network data (edgelist dataset)\n\n\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/class182_networkdata.csv\"\nclass182_networkdata &lt;- read.csv(file = url1)\n# contains information for three relationship : friendship, social interaction, task interaction \n# 2 = best friend, 1 = friend, 0 = not friend\n# Social/task interaction is measured as each interaction per hour\nhead(class182_networkdata) \n\n  ego alter friend_tie social_tie task_tie\n1   1     1          0        0.0      0.0\n2   1     2          0        0.0      0.0\n3   1     3          0        0.0      0.0\n4   1     4          0        0.0      0.0\n5   1     5          0        1.2      0.3\n6   1     6          0        0.0      0.0"
  },
  {
    "objectID": "W5_presentation.html#load-dataset-2",
    "href": "W5_presentation.html#load-dataset-2",
    "title": "W5. Network Cohesion and Communities",
    "section": "Load dataset",
    "text": "Load dataset\n\nread in the classroom network data (attribute dataset)\n\n\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/class182_attributedata.csv\"\nclass182_attributes &lt;- read.csv(file = url2)\nclass182_attributes\n\n   ids  race grade gender\n1    1 white    10   male\n2    2 black    10 female\n3    3 white    10 female\n4    4 white    11 female\n5    5 white    10   male\n6    6 white    10 female\n7    7 black    10 female\n8    8 black    10 female\n9    9 white    10 female\n10  10 black    11   male\n11  11 white    10   male\n12  12 black    11 female\n13  13 white    10 female\n14  14 black    10 female\n15  15 black    10 female\n16  16 black    13   male"
  },
  {
    "objectID": "W5_presentation.html#create-frienship-network",
    "href": "W5_presentation.html#create-frienship-network",
    "title": "W5. Network Cohesion and Communities",
    "section": "Create Frienship Network",
    "text": "Create Frienship Network\n\nExtract the friends within the dataset\n\n\n# edges with a friendship value greater than zero\nedge_value &lt;- class182_networkdata$friend_tie\nedgelist_friendship &lt;- class182_networkdata[edge_value &gt; 0, \n                                            c(\"ego\", \"alter\", \"friend_tie\")]\nhead(edgelist_friendship)\n\n   ego alter friend_tie\n17   2     1          1\n23   2     7          1\n24   2     8          1\n29   2    13          2\n30   2    14          1\n37   3     5          1"
  },
  {
    "objectID": "W5_presentation.html#create-frienship-network-1",
    "href": "W5_presentation.html#create-frienship-network-1",
    "title": "W5. Network Cohesion and Communities",
    "section": "Create Frienship Network",
    "text": "Create Frienship Network\n\nCreate a igraph object using the edgelist and attribute data frames.\n\n\n# directed network\n# have the strength of the relationship\nnet182_friend &lt;- graph_from_data_frame(d = edgelist_friendship, directed = T, \n                                       vertices = class182_attributes) \nnet182_friend \n\nIGRAPH f7a4b88 DN-- 16 62 -- \n+ attr: name (v/c), race (v/c), grade (v/n), gender (v/c), friend_tie\n| (e/n)\n+ edges from f7a4b88 (vertex names):\n [1] 2 -&gt;1  2 -&gt;7  2 -&gt;8  2 -&gt;13 2 -&gt;14 3 -&gt;5  3 -&gt;6  3 -&gt;11 3 -&gt;14 3 -&gt;15\n[11] 5 -&gt;1  5 -&gt;3  5 -&gt;6  5 -&gt;8  5 -&gt;10 5 -&gt;11 6 -&gt;1  6 -&gt;3  6 -&gt;5  6 -&gt;7 \n[21] 6 -&gt;10 6 -&gt;11 6 -&gt;12 7 -&gt;2  7 -&gt;8  7 -&gt;13 7 -&gt;14 8 -&gt;2  8 -&gt;5  8 -&gt;7 \n[31] 8 -&gt;13 8 -&gt;14 8 -&gt;15 9 -&gt;1  9 -&gt;3  9 -&gt;10 9 -&gt;12 9 -&gt;15 10-&gt;1  10-&gt;9 \n[41] 10-&gt;12 10-&gt;15 11-&gt;1  11-&gt;3  11-&gt;5  11-&gt;6  11-&gt;10 12-&gt;1  12-&gt;9  12-&gt;15\n[51] 13-&gt;2  13-&gt;7  13-&gt;8  13-&gt;14 14-&gt;2  14-&gt;3  14-&gt;8  14-&gt;12 15-&gt;1  15-&gt;7 \n[61] 15-&gt;9  15-&gt;12"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\nStart with a quick plot of the friendship network\nIs there any cohision in this network??\n\n\nplot(net182_friend, vertex.label = NA, vertex.size = 10,\n     edge.arrow.size = .25, edge.arrow.width = 1, \n     edge.color = \"light gray\", vertex.frame.color = NA)"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-1",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-1",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\nThe classroom network is fairly cohesive (ignoring the two isolates)\nHard to split the central group into two groups."
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-2",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-2",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\nexplore some of the properties of the network, starting with density.\n\nWhat does it mean?\n\n\nedge_density(net182_friend)\n\n[1] 0.2583333"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-3",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-3",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\nAbout a quarter of all possible ties are present in the network\n(m) = number of edges = 62\n(n) = number of nodes = 16\n\\[\nDentisy = \\frac{m}{n(n-1)} = \\frac{62}{16*(16-1)} = 0.2583 ‚âà 25.8%\n\\]\nGive us the information on the volume of ties, not the pattern of ties"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-4",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-4",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\ncomponents() : Detect all connected node in the network\n\nIf the nodes are connected, then they belong to the same component.\n‚Äústrong‚Äù mode : find components where node i and j are mutual reachable\n‚Äúweak‚Äù mode : find components where node i and j are in the same group if there is any path connecting them\n\n\n\n# *Note* : mode argument is ignored in the case of undirected networks.  \ncomponents_friendship &lt;- components(graph = net182_friend, mode = \"weak\")"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-5",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-5",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\n# membership : component membership of each node\n# csize : size of component\n# no : component number\ncomponents_friendship\n\n$membership\n 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 \n 1  1  1  2  1  1  1  1  1  1  1  1  1  1  1  3 \n\n$csize\n[1] 14  1  1\n\n$no\n[1] 3"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-6",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-6",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\nLet‚Äôs calculate the proportion of nodes in each component.\n\n\n# 87.5% of the nodes fall in the largest component\n# two isolates are each in their own component\ncomponents_friendship$csize / sum(components_friendship$csize) \n\n[1] 0.8750 0.0625 0.0625"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-with-vertex-connectivity",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-with-vertex-connectivity",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists with vertex connectivity",
    "text": "Let‚Äôs see if cohesion exists with vertex connectivity\n\nExplore the connectivity of specific pairs of nodes in the network\nvertex connectivity give us the number of nodes that would need to be removed so that i can no longer reach j"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-7",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-7",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\nUtilize the vertex connectivity with undirected network\n\n\nnet182_friend_und &lt;- as.undirected(net182_friend, mode = \"collapse\") \nnet182_friend_und\n\nIGRAPH ad04530 UN-- 16 42 -- \n+ attr: name (v/c), race (v/c), grade (v/n), gender (v/c)\n+ edges from ad04530 (vertex names):\n [1] 1 --2  1 --5  3 --5  1 --6  3 --6  5 --6  2 --7  6 --7  2 --8  5 --8 \n[11] 7 --8  1 --9  3 --9  1 --10 5 --10 6 --10 9 --10 1 --11 3 --11 5 --11\n[21] 6 --11 10--11 1 --12 6 --12 9 --12 10--12 2 --13 7 --13 8 --13 2 --14\n[31] 3 --14 7 --14 8 --14 12--14 13--14 1 --15 3 --15 7 --15 8 --15 9 --15\n[41] 10--15 12--15"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-8",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-8",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\ncalculate vertex connectivity for two example nodes, 1 and 9:\n\n\n# need to remove 5 other nodes -&gt; highly interconnected, likely part of the same social group \nvertex_disjoint_paths(graph = net182_friend_und, source = 1, target = 9)\n\n[1] 5"
  },
  {
    "objectID": "W5_presentation.html#lets-see-if-cohesion-exists-9",
    "href": "W5_presentation.html#lets-see-if-cohesion-exists-9",
    "title": "W5. Network Cohesion and Communities",
    "section": "Let‚Äôs see if cohesion exists",
    "text": "Let‚Äôs see if cohesion exists\n\ncalculate vertex connectivity for a network\n\n\n# returns the minimum number of vertices that must be removed to make the graph disconnected \n# (i.e., split into at least two components)\nvertex_connectivity(net182_friend_und)\n\n[1] 0"
  },
  {
    "objectID": "W5_presentation.html#community-or-group-detection",
    "href": "W5_presentation.html#community-or-group-detection",
    "title": "W5. Network Cohesion and Communities",
    "section": "Community (or Group) Detection",
    "text": "Community (or Group) Detection\n\nFind the communities (or groups) within the larger cohesive set.\nThe goal is to identify sets of nodes that have high internal density and few ties to outside members."
  },
  {
    "objectID": "W5_presentation.html#community-or-group-detection-1",
    "href": "W5_presentation.html#community-or-group-detection-1",
    "title": "W5. Network Cohesion and Communities",
    "section": "Community (or Group) Detection",
    "text": "Community (or Group) Detection\n\nMany different ways to detect communities.\n\n1) Cohesive Blocking, 2) Walktrap, 3) [OPTION] Edge Betweenness ‚Ä¶"
  },
  {
    "objectID": "W5_presentation.html#cohesive-blocking",
    "href": "W5_presentation.html#cohesive-blocking",
    "title": "W5. Network Cohesion and Communities",
    "section": "1) Cohesive Blocking",
    "text": "1) Cohesive Blocking\n\nSubset the network into groups based on vertex connectivity\nIteratively search for subgroups that maintain connectivity under the removal of k nodes\nStarting from highly cohesive groups (large k) and moving down to less cohesive ones"
  },
  {
    "objectID": "W5_presentation.html#cohesive-blocking-1",
    "href": "W5_presentation.html#cohesive-blocking-1",
    "title": "W5. Network Cohesion and Communities",
    "section": "1) Cohesive Blocking",
    "text": "1) Cohesive Blocking\n\nfriend_comm_cohesive &lt;- cohesive_blocks(graph = net182_friend_und)\nfriend_comm_cohesive # hard to interprete the result..... then...?\n\nCohesive block structure:\nB-1      c 0, n 16\n'- B-2   c 4, n 14   ooo.oooooo ooooo."
  },
  {
    "objectID": "W5_presentation.html#cohesive-blocking-2",
    "href": "W5_presentation.html#cohesive-blocking-2",
    "title": "W5. Network Cohesion and Communities",
    "section": "1) Cohesive Blocking",
    "text": "1) Cohesive Blocking\n\nVisualize the result!!\nTwo blocks (one with vertex connectivity 0, second with vertex connectivity)\n\n\nplot(friend_comm_cohesive, net182_friend_und)"
  },
  {
    "objectID": "W5_presentation.html#walktrap",
    "href": "W5_presentation.html#walktrap",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\n\nDetects communities through a series of short random walks\n\nNodes encountered on any given random walk are more likely to be within a community than not\nThe algorithm initially treats all nodes as communities of their own\nMerges them into larger communities, and these into still larger communities, and so on"
  },
  {
    "objectID": "W5_presentation.html#walktrap-1",
    "href": "W5_presentation.html#walktrap-1",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\n\nDetects communities through a series of short random walks\n\nUnlike Cohesive Blocking, Walktrap considers cohesion of communities and how separated they are from other communities\n\n\n\n# steps :length of random walk (4 or 5 is recommended)\n# membership : T/F, should membership be calculated based on highest modularity score? T by default\nfriend_comm_wt4 &lt;- cluster_walktrap(graph = net182_friend_und, steps = 4, \n                                    membership = T)"
  },
  {
    "objectID": "W5_presentation.html#walktrap-2",
    "href": "W5_presentation.html#walktrap-2",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\n\n# groups: 4 ‚Üí 4 community detected in the network\n# mod: 0.27 ‚Üí value of modularity \nprint(friend_comm_wt4, all = TRUE)\n\nIGRAPH clustering walktrap, groups: 4, mod: 0.27\n+ groups:\n  $`1`\n  [1] \"2\"  \"7\"  \"8\"  \"13\" \"14\"\n  \n  $`2`\n  [1] \"1\"  \"3\"  \"5\"  \"6\"  \"9\"  \"10\" \"11\" \"12\" \"15\"\n  \n  $`3`\n  [1] \"4\"\n  \n  $`4`\n  + ... omitted several groups/vertices"
  },
  {
    "objectID": "W5_presentation.html#walktrap-3",
    "href": "W5_presentation.html#walktrap-3",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\nWhat would happen if we used 3 steps?\n\n# the modularity is slightly higher when we use 3 steps\nfriend_comm_wt3 &lt;- cluster_walktrap(graph = net182_friend_und, \n                                    steps = 3, membership = T)\nfriend_comm_wt3\n\nIGRAPH clustering walktrap, groups: 5, mod: 0.28\n+ groups:\n  $`1`\n  [1] \"2\"  \"7\"  \"8\"  \"13\" \"14\"\n  \n  $`2`\n  [1] \"1\"  \"9\"  \"10\" \"12\" \"15\"\n  \n  $`3`\n  [1] \"3\"  \"5\"  \"6\"  \"11\"\n  \n  $`4`\n  + ... omitted several groups/vertices"
  },
  {
    "objectID": "W5_presentation.html#walktrap-4",
    "href": "W5_presentation.html#walktrap-4",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\n\nCompare the two partitions using the table function:\n\n\n# row : results for communities when step is 4 (4 community detected)\n# col : results for communities when step is 3 (5 community detected)\ntable( membership(friend_comm_wt4),  membership(friend_comm_wt3))\n\n   \n    1 2 3 4 5\n  1 5 0 0 0 0\n  2 0 5 4 0 0\n  3 0 0 0 1 0\n  4 0 0 0 0 1"
  },
  {
    "objectID": "W5_presentation.html#walktrap-5",
    "href": "W5_presentation.html#walktrap-5",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\n\nPlot the network based on the found communities, comparing the two partitions.\nColor the nodes based on the communities found using the walktrap algorithm."
  },
  {
    "objectID": "W5_presentation.html#walktrap-6",
    "href": "W5_presentation.html#walktrap-6",
    "title": "W5. Network Cohesion and Communities",
    "section": "2) Walktrap",
    "text": "2) Walktrap\n\npar(mfrow = c(1, 2))\nlayout &lt;- layout_with_fr(net182_friend) \nplot(net182_friend_und, layout = layout, vertex.color = membership(friend_comm_wt4),edge.color = \"light gray\", vertex.size = 20, main = \"Walktrap: 4 Steps\")\nplot(net182_friend_und, layout = layout, vertex.color = membership(friend_comm_wt3), edge.color = \"light gray\", vertex.size = 20, main = \"Walktrap: 3 Steps\")"
  },
  {
    "objectID": "W5_presentation.html#done",
    "href": "W5_presentation.html#done",
    "title": "W5. Network Cohesion and Communities",
    "section": "Done!",
    "text": "Done!\n\nPlease check KLMS for the assignment of this week(til Friday)\nIf you want to study in-depth knowledge for community detection algorithms or application for big data, please check this week [Option] in the assignment"
  },
  {
    "objectID": "W3_presentation.html#please-keep-in-mind",
    "href": "W3_presentation.html#please-keep-in-mind",
    "title": "W3. Visualization",
    "section": "Please keep in mind",
    "text": "Please keep in mind\n\nWe only cover a relatively small number of plotting options\nThere isn‚Äôt one ‚Äúmagic‚Äù plot that is perfect for everything (mirage‚Ä¶unicorn‚Ä¶)\n\nIf I could, I‚Äôd like to introduce R script that makes the perfect plot everytime\nA plot that works well for one network might not work for anotherü•≤"
  },
  {
    "objectID": "W3_presentation.html#setting-up-the-session",
    "href": "W3_presentation.html#setting-up-the-session",
    "title": "W3. Visualization",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nThe actors are students in a classroom and the relation of interest is friendship\n\n\n# Load files for edge list\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/class555_edgelist.csv\"\n\nclass_edges &lt;- read.csv(url1)"
  },
  {
    "objectID": "W3_presentation.html#lets-see-how-it-looks-like",
    "href": "W3_presentation.html#lets-see-how-it-looks-like",
    "title": "W3. Visualization",
    "section": "Let‚Äôs see how it looks like",
    "text": "Let‚Äôs see how it looks like\n\nhead(class_edges)\n\n  sender receiver weight\n1      1        3      1\n2      1        5      1\n3      1        7      1\n4      1       21      1\n5      2        3      1\n6      2        6      1"
  },
  {
    "objectID": "W3_presentation.html#lets-also-read-in-the-attribute-file.",
    "href": "W3_presentation.html#lets-also-read-in-the-attribute-file.",
    "title": "W3. Visualization",
    "section": "Let‚Äôs also read in the attribute file.",
    "text": "Let‚Äôs also read in the attribute file.\n\n# Attributes for gender, race and grade.\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/class555_attributedata.csv\"\n\nclass_attributes &lt;- read.csv(url2)"
  },
  {
    "objectID": "W3_presentation.html#we-begin-using-the-igraph-package.",
    "href": "W3_presentation.html#we-begin-using-the-igraph-package.",
    "title": "W3. Visualization",
    "section": "We begin using the igraph package.",
    "text": "We begin using the igraph package.\n\n# import library\nlibrary(igraph)"
  },
  {
    "objectID": "W3_presentation.html#now-we-go-ahead-and-construct-the-igraph-object",
    "href": "W3_presentation.html#now-we-go-ahead-and-construct-the-igraph-object",
    "title": "W3. Visualization",
    "section": "Now we go ahead and construct the igraph object",
    "text": "Now we go ahead and construct the igraph object\n\n# the edgelist and attribute objects as inputs.\n# use 'graph_from_data_frame' function \nclass_net &lt;- graph_from_data_frame(d = class_edges, directed = T, \n                                   vertices = class_attributes)"
  },
  {
    "objectID": "W3_presentation.html#detailed-information-of-our-network",
    "href": "W3_presentation.html#detailed-information-of-our-network",
    "title": "W3. Visualization",
    "section": "Detailed information of our network",
    "text": "Detailed information of our network\n\n# v/c : vertex attribute, character\n# v/n : vertex attribute, numeric\n# e/n : edge attribute, numeric\nclass_net\n\nIGRAPH b6bff02 DNW- 24 77 -- \n+ attr: name (v/c), gender (v/c), grade (v/n), race (v/c), weight (e/n)\n+ edges from b6bff02 (vertex names):\n [1] 1 -&gt;3  1 -&gt;5  1 -&gt;7  1 -&gt;21 2 -&gt;3  2 -&gt;6  3 -&gt;6  3 -&gt;8  3 -&gt;16 3 -&gt;24\n[11] 4 -&gt;13 4 -&gt;18 7 -&gt;1  7 -&gt;9  7 -&gt;10 7 -&gt;16 8 -&gt;3  8 -&gt;9  8 -&gt;13 9 -&gt;5 \n[21] 9 -&gt;8  10-&gt;6  10-&gt;14 10-&gt;19 10-&gt;20 10-&gt;24 11-&gt;12 11-&gt;15 11-&gt;18 11-&gt;24\n[31] 12-&gt;11 12-&gt;15 12-&gt;24 13-&gt;8  14-&gt;10 14-&gt;13 14-&gt;19 14-&gt;21 14-&gt;24 15-&gt;10\n[41] 15-&gt;11 15-&gt;13 15-&gt;14 15-&gt;24 16-&gt;3  16-&gt;5  16-&gt;9  16-&gt;19 17-&gt;8  17-&gt;13\n[51] 17-&gt;18 17-&gt;23 17-&gt;24 18-&gt;13 18-&gt;17 18-&gt;23 18-&gt;24 19-&gt;14 19-&gt;16 19-&gt;20\n[61] 19-&gt;21 20-&gt;19 20-&gt;21 20-&gt;24 21-&gt;5  21-&gt;19 21-&gt;20 22-&gt;23 23-&gt;5  23-&gt;13\n[71] 23-&gt;17 23-&gt;18 24-&gt;6  24-&gt;10 24-&gt;14 24-&gt;15 24-&gt;21"
  },
  {
    "objectID": "W3_presentation.html#plot-a-network-using-igraph",
    "href": "W3_presentation.html#plot-a-network-using-igraph",
    "title": "W3. Visualization",
    "section": "Plot a network using igraph",
    "text": "Plot a network using igraph\n\nPloting network offers an intuitive way of exploring the features of the network\nLooking at a picture of the network is a useful starting point for an analysis."
  },
  {
    "objectID": "W3_presentation.html#lets-start-with-the-default-plotting-in-igraph.",
    "href": "W3_presentation.html#lets-start-with-the-default-plotting-in-igraph.",
    "title": "W3. Visualization",
    "section": "Let‚Äôs start with the default plotting in igraph.",
    "text": "Let‚Äôs start with the default plotting in igraph.\n\nplot(class_net)"
  },
  {
    "objectID": "W3_presentation.html#and-improve-the-graph",
    "href": "W3_presentation.html#and-improve-the-graph",
    "title": "W3. Visualization",
    "section": "And improve the graph!",
    "text": "And improve the graph!\n\nThe plot does not tell us anything (gender, race, degree..)\nWe begin by exploring gender divides in the network\ni.e., how strongly does gender map onto friendship groups?"
  },
  {
    "objectID": "W3_presentation.html#and-improve-the-graph-1",
    "href": "W3_presentation.html#and-improve-the-graph-1",
    "title": "W3. Visualization",
    "section": "And improve the graph!",
    "text": "And improve the graph!\n\nLet‚Äôs color the nodes by gender\n\n\n#  make male students navy blue and female students light sky blue \ncols &lt;- ifelse(class_attributes$gender == \"Female\", \"lightskyblue\", \"navy\")"
  },
  {
    "objectID": "W3_presentation.html#and-improve-the-graph-2",
    "href": "W3_presentation.html#and-improve-the-graph-2",
    "title": "W3. Visualization",
    "section": "And improve the graph!",
    "text": "And improve the graph!\n\n# Using a simple `table()` function, we made simple table \n# 16 female students are assigned for lightskyblue color\n# 8 male students are assigned for navy color\ntable(cols, class_attributes$gender)\n\n              \ncols           Female Male\n  lightskyblue     16    0\n  navy              0    8"
  },
  {
    "objectID": "W3_presentation.html#assign-the-gendered-colorset-to-the-network",
    "href": "W3_presentation.html#assign-the-gendered-colorset-to-the-network",
    "title": "W3. Visualization",
    "section": "Assign the gendered colorset to the network",
    "text": "Assign the gendered colorset to the network\n\n# use a `V(g)$color` command to set the color of each node in the network \nV(class_net)$color &lt;- cols"
  },
  {
    "objectID": "W3_presentation.html#and-now-we-plot-as-before.",
    "href": "W3_presentation.html#and-now-we-plot-as-before.",
    "title": "W3. Visualization",
    "section": "And now we plot as before.",
    "text": "And now we plot as before.\n\n# same result for `plot(class_net, vertex.color = cols)`\nplot(class_net)"
  },
  {
    "objectID": "W3_presentation.html#what-is-different",
    "href": "W3_presentation.html#what-is-different",
    "title": "W3. Visualization",
    "section": "What is different?",
    "text": "What is different?\n\nThe network does divide along gender lines\nWith one small group of boys and then a larger set of girls\nTwo boys are not part of the ‚Äòboy group‚Äô, and are disproportionately connected to girls\nWhat else?"
  },
  {
    "objectID": "W3_presentation.html#what-if",
    "href": "W3_presentation.html#what-if",
    "title": "W3. Visualization",
    "section": "What if?",
    "text": "What if?\n\nA researcher may also be interested in who is popular in the class\nWe can identify it with Network Measure"
  },
  {
    "objectID": "W3_presentation.html#what-if-1",
    "href": "W3_presentation.html#what-if-1",
    "title": "W3. Visualization",
    "section": "What if?",
    "text": "What if?\n\nA researcher may also be interested in who is popular in the class\nWe can identify it with Network Measure\n\n\n# Yes! indegree!\n# degree : # of of neighbors in a network\n# indegree : # of incoming neighbors\n# indegree of node i : # of students who think node i is their frieds \n# -&gt; popularity\nindeg &lt;- degree(class_net, mode = \"in\")"
  },
  {
    "objectID": "W3_presentation.html#now-we-plot-the-network",
    "href": "W3_presentation.html#now-we-plot-the-network",
    "title": "W3. Visualization",
    "section": "Now we plot the network",
    "text": "Now we plot the network\n\nPut indegree value for the size of the nodes\n\n\n# set margin to -.10 to reduce some of the extra white space around the plot.\nplot(class_net, vertex.size = indeg, margin = -.10)"
  },
  {
    "objectID": "W3_presentation.html#now-we-plot-the-network-1",
    "href": "W3_presentation.html#now-we-plot-the-network-1",
    "title": "W3. Visualization",
    "section": "Now we plot the network",
    "text": "Now we plot the network\n\nMake all the nodes a little bigger, but the nodes are still sized by indegree\n\n\n# adding integer (here, 3) to the indegree to make the node bigger\n# change the color of label\nplot(class_net, vertex.size = indeg + 3, vertex.label.color = \"red\", \n     margin = -.10)"
  },
  {
    "objectID": "W3_presentation.html#now-we-plot-the-network-2",
    "href": "W3_presentation.html#now-we-plot-the-network-2",
    "title": "W3. Visualization",
    "section": "Now we plot the network",
    "text": "Now we plot the network\n\nOne boy (id 13) and one girl (id 24) receive a particularly high number of nominations\nBoys in the ‚Äòboy group‚Äô tend to have low indegree, as they are only friends with each other and there are few boys in the network."
  },
  {
    "objectID": "W3_presentation.html#lets-improve-the-graph",
    "href": "W3_presentation.html#lets-improve-the-graph",
    "title": "W3. Visualization",
    "section": "Let‚Äôs improve the graph!",
    "text": "Let‚Äôs improve the graph!\n\nChange the look of the nodes\n\n\nplot(class_net, \n    vertex.size = indeg + 3, \n    vertex.label = NA, # take out those labels using a vertex.label argument\n    vertex.frame.color = NA, # take off the black edges around the nodes\n    edge.arrow.size = .5, \n    edge.arrow.width = .75, \n    margin = -.10)"
  },
  {
    "objectID": "W3_presentation.html#lets-improve-the-graph-1",
    "href": "W3_presentation.html#lets-improve-the-graph-1",
    "title": "W3. Visualization",
    "section": "Let‚Äôs improve the graph!",
    "text": "Let‚Äôs improve the graph!\n\nNow we change the layout of the graph.\nlayout_with_mds(Multi-Dimensional Scaling)\n\ncalculate the distance between node i and j\nplace nodes where the distance is preserved\nüëâ Good for showing the overall/global structure of the network"
  },
  {
    "objectID": "W3_presentation.html#lets-improve-the-graph-2",
    "href": "W3_presentation.html#lets-improve-the-graph-2",
    "title": "W3. Visualization",
    "section": "Let‚Äôs improve the graph!",
    "text": "Let‚Äôs improve the graph!\n\nlayout_with_kk(Kamada‚ÄìKawai)\n\nAssign the distnace between node i and j\n\nif direct edge exists, place the nodes closer together\nif not, place the nodes farther apart\nüëâ Good for highlighting local structures and communities"
  },
  {
    "objectID": "W3_presentation.html#lets-improve-the-graph-3",
    "href": "W3_presentation.html#lets-improve-the-graph-3",
    "title": "W3. Visualization",
    "section": "Let‚Äôs improve the graph!",
    "text": "Let‚Äôs improve the graph!\n\nNow we change layout of a network.\n\n\nplot(class_net, \n     vertex.size = indeg + 3, \n     vertex.label = NA, \n     vertex.frame.color = NA, \n     edge.arrow.size = .5, \n     edge.arrow.width = .75, \n     edge.color = \"light gray\", # change the color of the lines to light gray,\n     layout = layout_with_mds, # alter the layout of the plot \n     margin = -.10)"
  },
  {
    "objectID": "W3_presentation.html#lets-improve-the-graph-4",
    "href": "W3_presentation.html#lets-improve-the-graph-4",
    "title": "W3. Visualization",
    "section": "Let‚Äôs improve the graph!",
    "text": "Let‚Äôs improve the graph!\n\nNow we change layout of a network.\n\n\nplot(class_net, \n     vertex.size = indeg + 3, \n     vertex.label = NA, \n     vertex.frame.color = NA, \n     edge.arrow.size = .5, \n     edge.arrow.width = .75, \n     edge.color = \"light gray\", # change the color of the lines to light gray,\n     layout = layout_with_kk, # alter the layout of the plot \n     margin = -.10)"
  },
  {
    "objectID": "W3_presentation.html#lets-improve-the-graph-5",
    "href": "W3_presentation.html#lets-improve-the-graph-5",
    "title": "W3. Visualization",
    "section": "Let‚Äôs improve the graph!",
    "text": "Let‚Äôs improve the graph!\n\na number of other options a researcher could explore if they wanted to continue tweaking their plot.\nSee the following help files for more options: ?plot.igraph ?igraph.plotting\n\n\n?plot.igraph"
  },
  {
    "objectID": "W3_presentation.html#done",
    "href": "W3_presentation.html#done",
    "title": "W3. Visualization",
    "section": "Done!",
    "text": "Done!\n\nPlease check KLMS for the assignment of this week\nThis week [Option] is a real fun\n\nyou can excercise how to draw dynamic graph!\n\nQuestions?"
  },
  {
    "objectID": "W12_presentation.html#setting-up-the-session",
    "href": "W12_presentation.html#setting-up-the-session",
    "title": "W12. Statistical models of networks",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nlibrary(ergm)\nlibrary(sna)\nlibrary(car)"
  },
  {
    "objectID": "W12_presentation.html#setting-up-the-session-1",
    "href": "W12_presentation.html#setting-up-the-session-1",
    "title": "W12. Statistical models of networks",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nRead in our example network data(high school friendship network)\n\n\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/example_schoolmat.csv\"\n# adjacency matrix format\nschool_mat &lt;- read.csv(file = url1, row.names = 1) \nschool_mat &lt;- as.matrix(school_mat)\nschool_mat[1:5, 1:5] \n\n    id1 id2 id3 id4 id5\nid1   0   0   0   0   0\nid2   0   0   0   0   0\nid3   0   0   0   0   0\nid4   0   0   0   0   0\nid5   0   0   0   0   0"
  },
  {
    "objectID": "W12_presentation.html#setting-up-the-session-2",
    "href": "W12_presentation.html#setting-up-the-session-2",
    "title": "W12. Statistical models of networks",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nRead in the attribute file\n\n\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/example_schooldata.csv\"\n\nschool_attributes &lt;- read.csv(file = url2) \nhead(school_attributes)\n\n  ids gender grade ses\n1   1      1    12   7\n2   2      1    10   7\n3   3      0     8  10\n4   4      0    11   9\n5   5      1     7  10\n6   6      1    10   9"
  },
  {
    "objectID": "W12_presentation.html#setting-up-the-session-3",
    "href": "W12_presentation.html#setting-up-the-session-3",
    "title": "W12. Statistical models of networks",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nRecode the 0s and 1s into male and female\n\n\nschool_attributes$gender_recode &lt;- recode(school_attributes$gender, \n                                          as.factor = F, \n                                          \"0 = 'male'; 1 = 'female'\")\nattribute_list &lt;- do.call(list, school_attributes) \nattribute_list$gender_recode\n\n [1] \"female\" \"female\" \"male\"   \"male\"   \"female\" \"female\" \"male\"   \"female\"\n [9] \"female\" \"male\"   \"male\"   \"male\"   \"female\" \"female\" \"female\" \"female\"\n[17] \"male\"   \"female\" \"male\"   \"male\"   \"female\" \"male\"   \"male\"   \"male\"  \n[25] \"male\"   \"female\" \"female\" \"female\" \"male\"   \"male\"   \"female\" \"male\""
  },
  {
    "objectID": "W12_presentation.html#setting-up-the-session-4",
    "href": "W12_presentation.html#setting-up-the-session-4",
    "title": "W12. Statistical models of networks",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nConstruct a network(with network package)\n\n\nschool_net &lt;- network(x = school_mat, directed = T, \n                      vertex.attr = attribute_list) \nschool_net\n\n Network attributes:\n  vertices = 32 \n  directed = TRUE \n  hyper = FALSE \n  loops = FALSE \n  multiple = FALSE \n  bipartite = FALSE \n  total edges= 124 \n    missing edges= 0 \n    non-missing edges= 124 \n\n Vertex attribute names: \n    gender gender_recode grade ids ses vertex.names \n\nNo edge attributes"
  },
  {
    "objectID": "W12_presentation.html#descriptive-analysis",
    "href": "W12_presentation.html#descriptive-analysis",
    "title": "W12. Statistical models of networks",
    "section": "Descriptive Analysis",
    "text": "Descriptive Analysis\n\nplot(school_net)"
  },
  {
    "objectID": "W12_presentation.html#descriptive-analysis-1",
    "href": "W12_presentation.html#descriptive-analysis-1",
    "title": "W12. Statistical models of networks",
    "section": "Descriptive Analysis",
    "text": "Descriptive Analysis\n\ncols &lt;- recode(school_attributes$gender, as.factor = F,\n               \"0 = 'blue'; 1 = 'pink'\")\nplot(school_net, vertex.col = cols)"
  },
  {
    "objectID": "W12_presentation.html#descriptive-analysis-2",
    "href": "W12_presentation.html#descriptive-analysis-2",
    "title": "W12. Statistical models of networks",
    "section": "Descriptive Analysis",
    "text": "Descriptive Analysis\n\nsocial divisions by grade\n\n\nplot(school_net, vertex.col = school_attributes$grade)"
  },
  {
    "objectID": "W12_presentation.html#fitting-an-ergm",
    "href": "W12_presentation.html#fitting-an-ergm",
    "title": "W12. Statistical models of networks",
    "section": "Fitting an ERGM",
    "text": "Fitting an ERGM\n\nERGM(Exponential Random Graph Model)\nPredicts the presence/absence of a tie between all i-j pairs\nInterpret it as a network features like reciprocity and homophily"
  },
  {
    "objectID": "W12_presentation.html#fitting-an-ergm-1",
    "href": "W12_presentation.html#fitting-an-ergm-1",
    "title": "W12. Statistical models of networks",
    "section": "Fitting an ERGM",
    "text": "Fitting an ERGM\n\nCalculate the probability of every possible network\nThe number of possible networks is unbelievably huge\nInstead of looking at all possible networks,\nRandomly sample some networks that the model is likely to produce"
  },
  {
    "objectID": "W12_presentation.html#fitting-an-ergm-2",
    "href": "W12_presentation.html#fitting-an-ergm-2",
    "title": "W12. Statistical models of networks",
    "section": "Fitting an ERGM",
    "text": "Fitting an ERGM\n\nMCMC(Markov Chain Monte Carlo)\n\nGenerates many random networks that follow the model‚Äôs rules\nUses them to estimate how the model behaves"
  },
  {
    "objectID": "W12_presentation.html#fitting-an-ergm-3",
    "href": "W12_presentation.html#fitting-an-ergm-3",
    "title": "W12. Statistical models of networks",
    "section": "Fitting an ERGM",
    "text": "Fitting an ERGM\n\nformula = the set of terms we want to include in the model\ncontrol = list of options used in the MCMC sample\nconstraints = a formula dictating if there should be any constraints on the networks generated in the MCMC sample"
  },
  {
    "objectID": "W12_presentation.html#simple-ergm",
    "href": "W12_presentation.html#simple-ergm",
    "title": "W12. Statistical models of networks",
    "section": "Simple ERGM",
    "text": "Simple ERGM\n\nRun an ERGM with only edges as a predictor\nExplain the school network as a function of the number of edges in the network\n\n\nmod_rand &lt;- ergm(formula = school_net ~ edges)"
  },
  {
    "objectID": "W12_presentation.html#simple-ergm-1",
    "href": "W12_presentation.html#simple-ergm-1",
    "title": "W12. Statistical models of networks",
    "section": "Simple ERGM",
    "text": "Simple ERGM\n\nLet‚Äôs take a look at the model results.\nexp(-1.946) / (1 + exp(-1.946)) = .125 (log-odds to probability)\n\n\nsummary(mod_rand) \n\nCall:\nergm(formula = school_net ~ edges)\n\nMaximum Likelihood Results:\n\n      Estimate Std. Error MCMC % z value Pr(&gt;|z|)    \nedges   -1.946      0.096      0  -20.27   &lt;1e-04 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n     Null Deviance: 1375.2  on 992  degrees of freedom\n Residual Deviance:  747.5  on 991  degrees of freedom\n \nAIC: 749.5  BIC: 754.4  (Smaller is better. MC Std. Err. = 0)"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm",
    "href": "W12_presentation.html#add-options-to-ergm",
    "title": "W12. Statistical models of networks",
    "section": "1) Add options to ERGM",
    "text": "1) Add options to ERGM\n\nLet‚Äôs add nodematch terms for gender and grade in formula\n\nCount the number of times that an edge exists where i and j have the same attribute\n\n\n\nmod_homoph1 &lt;- ergm(school_net ~ edges + nodematch(\"gender_recode\") + \n                      nodematch(\"grade\"))"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm-1",
    "href": "W12_presentation.html#add-options-to-ergm-1",
    "title": "W12. Statistical models of networks",
    "section": "1) Add options to ERGM",
    "text": "1) Add options to ERGM\n\nsummary(mod_homoph1)\n\nCall:\nergm(formula = school_net ~ edges + nodematch(\"gender_recode\") + \n    nodematch(\"grade\"))\n\nMaximum Likelihood Results:\n\n                        Estimate Std. Error MCMC % z value Pr(&gt;|z|)    \nedges                    -2.6140     0.1703      0 -15.351   &lt;1e-04 ***\nnodematch.gender_recode   0.1137     0.2086      0   0.545    0.586    \nnodematch.grade           2.3088     0.2144      0  10.769   &lt;1e-04 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n     Null Deviance: 1375.2  on 992  degrees of freedom\n Residual Deviance:  635.7  on 989  degrees of freedom\n \nAIC: 641.7  BIC: 656.4  (Smaller is better. MC Std. Err. = 0)"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm-2",
    "href": "W12_presentation.html#add-options-to-ergm-2",
    "title": "W12. Statistical models of networks",
    "section": "2) Add options to ERGM",
    "text": "2) Add options to ERGM\n\nWhether boys (compared to girls) send out and/or receive more ties\n\nAdd nodeifactor terms which capture if the mean number of ties coming in, nodeofactor for going out\nAdd analogous terms for grade using nodeicov and nodeocov\n\n\n\nmod_homoph2 &lt;- ergm(school_net ~ edges + nodematch(\"gender_recode\") +\n                      nodematch(\"grade\") + \n                      nodeifactor(\"gender_recode\") + \n                      nodeofactor(\"gender_recode\") +\n                      nodeicov(\"grade\") + nodeocov(\"grade\"))"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm-3",
    "href": "W12_presentation.html#add-options-to-ergm-3",
    "title": "W12. Statistical models of networks",
    "section": "2) Add options to ERGM",
    "text": "2) Add options to ERGM\n\nsummary(mod_homoph2) \n\nCall:\nergm(formula = school_net ~ edges + nodematch(\"gender_recode\") + \n    nodematch(\"grade\") + nodeifactor(\"gender_recode\") + nodeofactor(\"gender_recode\") + \n    nodeicov(\"grade\") + nodeocov(\"grade\"))\n\nMaximum Likelihood Results:\n\n                               Estimate Std. Error MCMC % z value Pr(&gt;|z|)    \nedges                          -7.54896    0.82637      0  -9.135   &lt;1e-04 ***\nnodematch.gender_recode         0.03797    0.22294      0   0.170   0.8648    \nnodematch.grade                 2.49128    0.23497      0  10.603   &lt;1e-04 ***\nnodeifactor.gender_recode.male  0.45209    0.22428      0   2.016   0.0438 *  \nnodeofactor.gender_recode.male  0.55980    0.22467      0   2.492   0.0127 *  \nnodeicov.grade                  0.26617    0.06388      0   4.167   &lt;1e-04 ***\nnodeocov.grade                  0.18685    0.06275      0   2.978   0.0029 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n     Null Deviance: 1375.2  on 992  degrees of freedom\n Residual Deviance:  586.6  on 985  degrees of freedom\n \nAIC: 600.6  BIC: 634.9  (Smaller is better. MC Std. Err. = 0)"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm-again",
    "href": "W12_presentation.html#add-options-to-ergm-again",
    "title": "W12. Statistical models of networks",
    "section": "3) Add options to ERGM again",
    "text": "3) Add options to ERGM again\n\nAdd a mutual term to the mode to identify reciprocity\n\nmutual term counts the number of pairs where i-&gt;j and j-&gt;i exist.\nMCMC estimation : useful to set the input parameters to the estimation routine\n\n\n\nmod_homoph_mutual1b &lt;- ergm(school_net ~ edges + \n                              nodematch(\"gender_recode\") +\n                              nodematch(\"grade\") + \n                              nodeicov(\"grade\") + nodeocov(\"grade\") +\n                              #added!\n                              mutual(by = \"gender_recode\"),\n                            control = control.ergm(MCMC.burnin = 50000, \n                                                   MCMC.samplesize = 6000))"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm-again-1",
    "href": "W12_presentation.html#add-options-to-ergm-again-1",
    "title": "W12. Statistical models of networks",
    "section": "3) Add options to ERGM again",
    "text": "3) Add options to ERGM again\n\nInclude a control for degree differences (by gender) in the model\n\nIf boys are more likely to be involved in mutual dyads because they send out more ties or because expectations of reciprocity are higher among boys\n\n\n\nmod_homoph_mutual1c &lt;- ergm(school_net ~ edges +\n                              nodematch(\"gender_recode\") + \n                              nodematch(\"grade\") + \n                              nodeofactor(\"gender_recode\") + \n                              nodeicov(\"grade\") + nodeocov(\"grade\") + \n                              #added!\n                              mutual(by = \"gender_recode\"),\n                            control = control.ergm(MCMC.burnin = 50000, \n                                                   MCMC.samplesize = 6000))"
  },
  {
    "objectID": "W12_presentation.html#add-options-to-ergm-again-2",
    "href": "W12_presentation.html#add-options-to-ergm-again-2",
    "title": "W12. Statistical models of networks",
    "section": "3) Add options to ERGM again",
    "text": "3) Add options to ERGM again\n\nsummary(mod_homoph_mutual1c)\n\nCall:\nergm(formula = school_net ~ edges + nodematch(\"gender_recode\") + \n    nodematch(\"grade\") + nodeofactor(\"gender_recode\") + nodeicov(\"grade\") + \n    nodeocov(\"grade\") + mutual(by = \"gender_recode\"), control = control.ergm(MCMC.burnin = 50000, \n    MCMC.samplesize = 6000))\n\nMonte Carlo Maximum Likelihood Results:\n\n                               Estimate Std. Error MCMC % z value Pr(&gt;|z|)    \nedges                          -6.35795    0.71793      0  -8.856  &lt; 1e-04 ***\nnodematch.gender_recode         0.05148    0.18855      0   0.273  0.78484    \nnodematch.grade                 1.70835    0.21157      0   8.074  &lt; 1e-04 ***\nnodeofactor.gender_recode.male  0.50198    0.29758      0   1.687  0.09163 .  \nnodeicov.grade                  0.21836    0.06942      0   3.145  0.00166 ** \nnodeocov.grade                  0.09846    0.06830      0   1.442  0.14944    \nmutual.by.gender_recode.female  1.15860    0.30117      0   3.847  0.00012 ***\nmutual.by.gender_recode.male    1.24840    0.23904      0   5.223  &lt; 1e-04 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n     Null Deviance: 1375.2  on 992  degrees of freedom\n Residual Deviance:  548.3  on 984  degrees of freedom\n \nAIC: 564.3  BIC: 603.5  (Smaller is better. MC Std. Err. = 0.2324)"
  },
  {
    "objectID": "W12_presentation.html#goodness-of-fit",
    "href": "W12_presentation.html#goodness-of-fit",
    "title": "W12. Statistical models of networks",
    "section": "Goodness of Fit",
    "text": "Goodness of Fit\n\nLet‚Äôs see if the specified model is fitting the network well\n\nTest whether the micro-level tie formation processes assumed in the model are sufficient to reproduce the features of the network as a whole"
  },
  {
    "objectID": "W12_presentation.html#goodness-of-fit-1",
    "href": "W12_presentation.html#goodness-of-fit-1",
    "title": "W12. Statistical models of networks",
    "section": "Goodness of Fit",
    "text": "Goodness of Fit\n\ngof() function will simulate a set of networks based on the estimated model\nTake the generated networks, calculate the macro features of interest (here distance and the shared partner distribution), and compare that to the true value\n\n\ngof_mod_homoph_mutual1 &lt;- gof(mod_homoph_mutual1c, \n                              GOF = ~ distance + espartners + model,\n                              control = control.gof.ergm(seed = 110))"
  },
  {
    "objectID": "W12_presentation.html#goodness-of-fit-2",
    "href": "W12_presentation.html#goodness-of-fit-2",
    "title": "W12. Statistical models of networks",
    "section": "Goodness of Fit",
    "text": "Goodness of Fit\n\nPlot the goodness of fit statistics.\n\nboxplot for distribution of simulation results\nthick line plot for statistics in true network\n\n\n\npar(mfrow = c(1, 3)) \nplot(gof_mod_homoph_mutual1)"
  },
  {
    "objectID": "W12_presentation.html#adding-gwesp-to-the-model",
    "href": "W12_presentation.html#adding-gwesp-to-the-model",
    "title": "W12. Statistical models of networks",
    "section": "Adding GWESP to the Model",
    "text": "Adding GWESP to the Model\n\nAdd a Geometrically Weighted Edgewise Shared Partners to the model that will capture the tendency for nodes who are tied to have the same friends\nA triangle is defined as all cases where i-j and j-k exist and then either k-&gt;i or i-&gt;k exist\n\n\nmod_homoph_mutual_gwesp1 &lt;- ergm(school_net ~ edges + \n                                   nodematch(\"gender_recode\") + \n                                   nodematch(\"grade\") + \n                                   nodeifactor(\"gender_recode\") + \n                                   nodeofactor(\"gender_recode\") + \n                                   nodeicov(\"grade\") + nodeocov(\"grade\") + \n                                   mutual + gwesp(decay = 0.5, fixed = T), \n                                 control = control.ergm(MCMLE.maxit = 20,      \n                                                          MCMC.samplesize = 5000, \n                                                          MCMC.burnin = 25000,    \n                                                          MCMC.interval = 10000,  \n                                                          MCMC.effectiveSize = 500,\n                                                          seed = 123\n                                                        ))"
  },
  {
    "objectID": "W12_presentation.html#adding-gwesp-to-the-model-1",
    "href": "W12_presentation.html#adding-gwesp-to-the-model-1",
    "title": "W12. Statistical models of networks",
    "section": "Adding GWESP to the Model",
    "text": "Adding GWESP to the Model\n\nsummary(mod_homoph_mutual_gwesp1)\n\nCall:\nergm(formula = school_net ~ edges + nodematch(\"gender_recode\") + \n    nodematch(\"grade\") + nodeifactor(\"gender_recode\") + nodeofactor(\"gender_recode\") + \n    nodeicov(\"grade\") + nodeocov(\"grade\") + mutual + gwesp(decay = 0.5, \n    fixed = T), control = control.ergm(MCMLE.maxit = 20, MCMC.samplesize = 5000, \n    MCMC.burnin = 25000, MCMC.interval = 10000, MCMC.effectiveSize = 500, \n    seed = 123))\n\nMonte Carlo Maximum Likelihood Results:\n\n                               Estimate Std. Error MCMC % z value Pr(&gt;|z|)    \nedges                          -5.13218    0.44885      0 -11.434   &lt;1e-04 ***\nnodematch.gender_recode         0.02581    0.19784      0   0.130   0.8962    \nnodematch.grade                 1.40642    0.17378      0   8.093   &lt;1e-04 ***\nnodeifactor.gender_recode.male  0.11296    0.21320      0   0.530   0.5962    \nnodeofactor.gender_recode.male  0.27324    0.21076      0   1.296   0.1948    \nnodeicov.grade                  0.10168    0.05738      0   1.772   0.0764 .  \nnodeocov.grade                  0.01121    0.05642      0   0.199   0.8426    \nmutual                          1.83183    0.38152      0   4.801   &lt;1e-04 ***\ngwesp.OTP.fixed.0.5             0.79911    0.13528      0   5.907   &lt;1e-04 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n     Null Deviance: 1375.2  on 992  degrees of freedom\n Residual Deviance:  510.5  on 983  degrees of freedom\n \nAIC: 528.5  BIC: 572.6  (Smaller is better. MC Std. Err. = 0.1652)"
  },
  {
    "objectID": "W12_presentation.html#simulate-a-network-with-the-ergm-result",
    "href": "W12_presentation.html#simulate-a-network-with-the-ergm-result",
    "title": "W12. Statistical models of networks",
    "section": "Simulate a Network with the ERGM Result",
    "text": "Simulate a Network with the ERGM Result\n\nsim_schoolnet &lt;- simulate(mod_homoph_mutual_gwesp1, nsim = 1, seed = 1012,\n                          control = control.simulate.ergm(MCMC.burnin = 100000))"
  },
  {
    "objectID": "W12_presentation.html#simulate-a-network-with-the-ergm-result-1",
    "href": "W12_presentation.html#simulate-a-network-with-the-ergm-result-1",
    "title": "W12. Statistical models of networks",
    "section": "Simulate a Network with the ERGM Result",
    "text": "Simulate a Network with the ERGM Result\n\nplotting the true network and simulated network\n\n\npar(mfrow = c(1, 2))\nplot(school_net, vertex.col = \"grade\", main = \"True Network\")\nplot(sim_schoolnet, vertex.col = \"grade\", main = \"Simulated Network\")"
  },
  {
    "objectID": "W12_presentation.html#done",
    "href": "W12_presentation.html#done",
    "title": "W12. Statistical models of networks",
    "section": "Done!",
    "text": "Done!\n\nPlease check KLMS for the assignment of this week(til Friday)\nIf you want to study in-depth knowledge for statistical models of network, please check this week [Option] in the assignment"
  },
  {
    "objectID": "W4_presentation.html#working-with-ego-network-data",
    "href": "W4_presentation.html#working-with-ego-network-data",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Working with Ego Network Data",
    "text": "Working with Ego Network Data\n\nEgo network data are based on a sample of individuals and are commonly used in the social sciences.\nEach respondent (ego) reports on the people (alters) they are connected to, providing the local network around the focal respondent.\nEgo network data offer only pieces of the whole network"
  },
  {
    "objectID": "W4_presentation.html#working-with-ego-network-data-1",
    "href": "W4_presentation.html#working-with-ego-network-data-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Working with Ego Network Data",
    "text": "Working with Ego Network Data\n\nEgo network data can be structured in a number of ways but will generally have 4 kinds of information:\n\ndemographic, behavioral, etc. information on the egos\ndemographic, behavioral, etc. information on the named alters\ninformation about the relationship between ego and alter\ninformation about the relationships between the alters"
  },
  {
    "objectID": "W4_presentation.html#working-with-ego-network-data-2",
    "href": "W4_presentation.html#working-with-ego-network-data-2",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Working with Ego Network Data",
    "text": "Working with Ego Network Data\n\nWork with ego network data from the GSS(General Social Survey)\n\na file with the ego attributes\na file with the alter(other) attributes\na file with the alter-alter ties\n\n\n\n# a file with the ego attributes\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_ego_dat.csv\"\n\nego_dat &lt;- read.csv(file = url1, stringsAsFactors = F)"
  },
  {
    "objectID": "W4_presentation.html#load-dataset-for-ego-attribute",
    "href": "W4_presentation.html#load-dataset-for-ego-attribute",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Load Dataset for Ego Attribute",
    "text": "Load Dataset for Ego Attribute\nFirst 10 rows of the ego data frame\n\n# CASEID : unique ID for each respondent\n# NUMGIVEN : the number of alters named, Respondents could say they had 6+ alters but were only allowed to report on 5\nego_dat[1:10, c(\"CASEID\", \"AGE\", \"EDUC\", \"RACE\", \"SEX\", \"HAPPY\", \"NUMGIVEN\")]\n\n     CASEID AGE EDUC  RACE    SEX HAPPY NUMGIVEN\n1  19850001  33   16 white   male     2        6\n2  19850002  49   19 white   male     2        6\n3  19850003  23   16 white female     2        5\n4  19850004  26   20 white female     2        5\n5  19850005  24   17 white female     2        5\n6  19850006  45   17 white   male     2        4\n7  19850007  44   18 white female     2        6\n8  19850008  56   12 white female     2        5\n9  19850009  85    7 white female     2        2\n10 19850010  65   12 white female     2        2"
  },
  {
    "objectID": "W4_presentation.html#load-dataset-for-ego-attribute-1",
    "href": "W4_presentation.html#load-dataset-for-ego-attribute-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Load Dataset for Ego Attribute",
    "text": "Load Dataset for Ego Attribute\n\n# check if there is empty values\nna_yn &lt;-!is.na(ego_dat$NUMGIVEN)\n# exclude the emply values\nego_dat &lt;- ego_dat[na_yn, ]"
  },
  {
    "objectID": "W4_presentation.html#load-dataset-for-alter-attribute",
    "href": "W4_presentation.html#load-dataset-for-alter-attribute",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Load Dataset for Alter Attribute",
    "text": "Load Dataset for Alter Attribute\n\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_alter_dat.csv\"\n\nalter_dat &lt;- read.csv(file = url2, stringsAsFactors = F)"
  },
  {
    "objectID": "W4_presentation.html#load-dataset-for-alter-attribute-1",
    "href": "W4_presentation.html#load-dataset-for-alter-attribute-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Load Dataset for Alter Attribute",
    "text": "Load Dataset for Alter Attribute\n\n# each row corresponds to a different named alter\n# Each alter is denoted by an ALTERID (CASEID : ALTERID = 1:N)\n# KIN : 1(True) if ego is relatives with that alter\n# respondent 1 (CASEID = 19850001) names 5 alters. The first alter (ALTERID = 1) is 32, has 18 years of education, and is not kin to ego.\nalter_dat[1:10, c(\"CASEID\", \"ALTERID\", \"AGE\", \"EDUC\", \"RACE\", \"SEX\", \"KIN\")] \n\n     CASEID ALTERID AGE EDUC  RACE    SEX KIN\n1  19850001       1  32   18 white   male   0\n2  19850001       2  29   16 white female   1\n3  19850001       3  32   18 white   male   0\n4  19850001       4  35   16 white   male   1\n5  19850001       5  29   13 white female   0\n6  19850002       1  42   12 white female   1\n7  19850002       2  44   18 white   male   0\n8  19850002       3  45   16 white   male   0\n9  19850002       4  40   12 white female   0\n10 19850002       5  50   18 white   male   0"
  },
  {
    "objectID": "W4_presentation.html#load-dataset-for-alter-alter-tie",
    "href": "W4_presentation.html#load-dataset-for-alter-alter-tie",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Load Dataset for Alter-Alter Tie",
    "text": "Load Dataset for Alter-Alter Tie\n\nurl3 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_alteralter_dat.csv\"\n\nalteralter_dat &lt;- read.csv(file = url3)"
  },
  {
    "objectID": "W4_presentation.html#load-dataset-for-alter-alter-tie-1",
    "href": "W4_presentation.html#load-dataset-for-alter-alter-tie-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Load Dataset for Alter-Alter Tie",
    "text": "Load Dataset for Alter-Alter Tie\n\nthe ties between the named alters\n\n\n# `CASEID` : relevant ego \n# `ALTER1` : first alter in the dyad\n# `ALTER2` : second alter in the dyad\n# `Weight` : nature of the relationship (1 : alters know each other, 2: especially close)\nalteralter_dat[1:10, ]\n\n     CASEID ALTER1 ALTER2 WEIGHT\n1  19850001      1      2      2\n2  19850001      1      3      1\n3  19850001      1      4      1\n4  19850001      1      5      1\n5  19850001      2      3      2\n6  19850001      2      4      2\n7  19850001      2      5      2\n8  19850001      3      4      1\n9  19850001      3      5      1\n10 19850001      4      5      1"
  },
  {
    "objectID": "W4_presentation.html#lets-make-ego-network",
    "href": "W4_presentation.html#lets-make-ego-network",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Let‚Äôs make Ego Network",
    "text": "Let‚Äôs make Ego Network\n\ntransforming traditional survey data into something that has the structure of a network ü§Øü§Øü§Øü§Øü§Ø\nüçÄüçÄegorüçÄüçÄ package has made the task of constructing ego networks from survey data much easier\n\n\n# load a package for constructing ego network\nlibrary(egor)"
  },
  {
    "objectID": "W4_presentation.html#lets-make-ego-network-1",
    "href": "W4_presentation.html#lets-make-ego-network-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Let‚Äôs make Ego Network",
    "text": "Let‚Äôs make Ego Network\n\nconstruct an egor object from our survey data\n\n\n# `egor()` : input the data using three separate files.\n\negonetlist &lt;-  egor(alters = alter_dat, # alter attributes data frame\n                    egos = ego_dat, # ego attributes data frame\n                    aaties = alteralter_dat, # alter-alter tie data frame\n                    alter_design = list(max = 5), # list of arguments to specify nomination information from survey\n                    # list of variable names corresponding to key columns\n                    ID.vars = list(ego = \"CASEID\", alter =\"ALTERID\", \n                                   source = \"ALTER1\", target = \"ALTER2\") \n                    )"
  },
  {
    "objectID": "W4_presentation.html#calculate-summary-statistics",
    "href": "W4_presentation.html#calculate-summary-statistics",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Calculate Summary Statistics",
    "text": "Calculate Summary Statistics\n\nWe will begin with density, showing the proportion of alter-alter ties that exist in each ego network\nBy the way, What is the definition of density?ü§®"
  },
  {
    "objectID": "W4_presentation.html#calculate-summary-statistics-1",
    "href": "W4_presentation.html#calculate-summary-statistics-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Calculate Summary Statistics",
    "text": "Calculate Summary Statistics\n\na measure for overall level of connection among nodes in a network\n(m) = number of edges\n\n(n) = number of nodes\n\\[\nDentisy = \\frac{2m}{n(n-1)}\n\\]\n\n\n# use `ego_density()` function\ndens &lt;- ego_density(egonetlist)"
  },
  {
    "objectID": "W4_presentation.html#calculate-summary-statistics-2",
    "href": "W4_presentation.html#calculate-summary-statistics-2",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Calculate Summary Statistics",
    "text": "Calculate Summary Statistics\n\n# we calculated the density of every ego network\nhead(dens)\n\n# A tibble: 6 √ó 2\n    .egoID density\n     &lt;int&gt;   &lt;dbl&gt;\n1 19850001   1    \n2 19850002   0.8  \n3 19850003   0.6  \n4 19850004   0.6  \n5 19850005   1    \n6 19850006   0.667"
  },
  {
    "objectID": "W4_presentation.html#plotting-ego-networks",
    "href": "W4_presentation.html#plotting-ego-networks",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Plotting Ego Networks",
    "text": "Plotting Ego Networks\n\ngo over how to plot the ego networks using packages like igraph\n\n\nlibrary(igraph)"
  },
  {
    "objectID": "W4_presentation.html#plotting-ego-networks-1",
    "href": "W4_presentation.html#plotting-ego-networks-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Plotting Ego Networks",
    "text": "Plotting Ego Networks\n\nconvert the egor object to igraph objects.\n\n\nigraph_nets &lt;- as_igraph(egonetlist, include.ego = TRUE)"
  },
  {
    "objectID": "W4_presentation.html#plotting-ego-networks-2",
    "href": "W4_presentation.html#plotting-ego-networks-2",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Plotting Ego Networks",
    "text": "Plotting Ego Networks\nNow, let‚Äôs take a look at the first three ego networks.\n\nigraph_nets[1:3] \n\n$`19850001`\nIGRAPH 8095045 UN-- 6 15 -- \n+ attr: .egoID (g/n), name (v/c), AGE (v/n), EDUC (v/n), RACE (v/c),\n| SEX (v/c), RELIG (v/c), AGE_CATEGORICAL (v/c), EDUC_CATEGORICAL\n| (v/c), TALKTO (v/n), SPOUSE (v/n), KIN (v/n), WEIGHT (e/n)\n+ edges from 8095045 (vertex names):\n [1] 1--2   1--3   1--4   1--5   2--3   2--4   2--5   3--4   3--5   4--5  \n[11] 1--ego 2--ego 3--ego 4--ego 5--ego\n\n$`19850002`\nIGRAPH 09b1aac UN-- 6 13 -- \n+ attr: .egoID (g/n), name (v/c), AGE (v/n), EDUC (v/n), RACE (v/c),\n| SEX (v/c), RELIG (v/c), AGE_CATEGORICAL (v/c), EDUC_CATEGORICAL\n| (v/c), TALKTO (v/n), SPOUSE (v/n), KIN (v/n), WEIGHT (e/n)\n+ edges from 09b1aac (vertex names):\n [1] 1--2   1--3   1--4   1--5   2--4   3--4   3--5   4--5   1--ego 2--ego\n[11] 3--ego 4--ego 5--ego\n\n$`19850003`\nIGRAPH b1fdaea UN-- 6 11 -- \n+ attr: .egoID (g/n), name (v/c), AGE (v/n), EDUC (v/n), RACE (v/c),\n| SEX (v/c), RELIG (v/c), AGE_CATEGORICAL (v/c), EDUC_CATEGORICAL\n| (v/c), TALKTO (v/n), SPOUSE (v/n), KIN (v/n), WEIGHT (e/n)\n+ edges from b1fdaea (vertex names):\n [1] 1--2   1--3   1--4   2--3   2--4   3--4   1--ego 2--ego 3--ego 4--ego\n[11] 5--ego"
  },
  {
    "objectID": "W4_presentation.html#plotting-ego-networks-3",
    "href": "W4_presentation.html#plotting-ego-networks-3",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Plotting Ego Networks",
    "text": "Plotting Ego Networks\nlet‚Äôs plot a couple of example networks, focusing on the first 3 ego networks.\n\n# set 1 row, 3 column grid for visualization layout\npar(mfrow = c(1, 3))\n# draw graphs in igraph_nets variable\npurrr::walk(igraph_nets[1:3], plot)"
  },
  {
    "objectID": "W4_presentation.html#plotting-ego-networks-4",
    "href": "W4_presentation.html#plotting-ego-networks-4",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Plotting Ego Networks",
    "text": "Plotting Ego Networks\n\nLet‚Äôs color the nodes based on gender\nso we can get a sense of the level of gender homogeneity in these ego networks\n\n\n# somewhat more difficult task than with a single network\n# defind a function to set the color for each network\nplotfunc_colorgender &lt;- function(nets){ \n  # Arguments: \n  # nets: ego network of interest\n  \n  # extracting the attribute from the ego network:\n  cols &lt;- vertex_attr(nets, \"SEX\") \n\n  # now we use an ifelse statement to set color,\n  # light sky blue if gender equals female, blue otherwise:\n  cols &lt;- ifelse(cols == \"female\", \"lightskyblue\", \"blue\")\n\n  # plotting ego network with nodes colored based on gender:\n  plot(nets, vertex.color = cols) \n}"
  },
  {
    "objectID": "W4_presentation.html#plotting-ego-networks-5",
    "href": "W4_presentation.html#plotting-ego-networks-5",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Plotting Ego Networks",
    "text": "Plotting Ego Networks\n\nNow let‚Äôs run plotfunc_colorgender() over the first three ego networks.\n\n\n# third ego network is homogenous in terms of gender\n# the first two are quite heterogeneous\n# first ego network is complete\npar(mfrow = c(1, 3))\npurrr::walk(igraph_nets[1:3], plotfunc_colorgender)"
  },
  {
    "objectID": "W4_presentation.html#triadic-processes",
    "href": "W4_presentation.html#triadic-processes",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triadic Processes",
    "text": "Triadic Processes\n\nwork primarily with the sna package [@sna], so let‚Äôs start by loading that package.\n\n\nlibrary(sna)"
  },
  {
    "objectID": "W4_presentation.html#triadic-processes-1",
    "href": "W4_presentation.html#triadic-processes-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triadic Processes",
    "text": "Triadic Processes\n\ndownload three datasets(1. friends 2. advice 3. attributes)\n\n\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/krackhardt_advice.csv\"\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/krackhardt_attributes.csv\"\nurl3 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/krackhardt_friendship.csv\"\n\nadvice_data_frame &lt;- read.csv(file = url1) \nattributes &lt;- read.csv(file = url2)\nfriends_data_frame &lt;- read.csv(file = url3)\n\n# extract only Ture relationship\nadvice_edgelist &lt;- advice_data_frame[advice_data_frame$advice_tie == 1, ]\nfriends_edgelist &lt;- friends_data_frame[friends_data_frame$friendship_tie == 1, ]"
  },
  {
    "objectID": "W4_presentation.html#triadic-processes-2",
    "href": "W4_presentation.html#triadic-processes-2",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triadic Processes",
    "text": "Triadic Processes\nLet‚Äôs take a look at the dataset, one by one\n\n# ego 1 said he or she gives advice from alter 2,4,8,16,21\nhead(advice_edgelist)\n\n   ego alter advice_tie\n2    1     2          1\n4    1     4          1\n8    1     8          1\n16   1    16          1\n18   1    18          1\n21   1    21          1"
  },
  {
    "objectID": "W4_presentation.html#triadic-processes-3",
    "href": "W4_presentation.html#triadic-processes-3",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triadic Processes",
    "text": "Triadic Processes\nLet‚Äôs take a look at the dataset, one by one\n\n# ego 1 said he or she is friend with alter 2,4,8,12,16\nhead(friends_edgelist)\n\n   ego alter friendship_tie\n2    1     2              1\n4    1     4              1\n8    1     8              1\n12   1    12              1\n16   1    16              1\n22   2     1              1"
  },
  {
    "objectID": "W4_presentation.html#triadic-processes-4",
    "href": "W4_presentation.html#triadic-processes-4",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triadic Processes",
    "text": "Triadic Processes\nLet‚Äôs take a look at the dataset, one by one\n\n# attributes for each resopondent\nhead(attributes)\n\n  ids AGE TENURE LEVEL DEPT\n1   1  33  9.333     3    4\n2   2  42 19.583     2    4\n3   3  40 12.750     3    2\n4   4  33  7.500     3    4\n5   5  32  3.333     3    2\n6   6  59 28.000     3    1"
  },
  {
    "objectID": "W4_presentation.html#triadic-processes-5",
    "href": "W4_presentation.html#triadic-processes-5",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triadic Processes",
    "text": "Triadic Processes\n\nWe now construct the network , as before, using the network() function.\n\n\nkrack_friendship &lt;-  network(x = friends_edgelist, directed = T, \n                             vertices = attributes)\nkrack_advice &lt;- network(x = advice_edgelist, directed = T, \n                        vertices = attributes)"
  },
  {
    "objectID": "W4_presentation.html#triad-census",
    "href": "W4_presentation.html#triad-census",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\n\nThe triad census captures the distribution of triads across 16 basic types, representing different patterns of interaction between the three nodes\nThere are 16 different triad types:"
  },
  {
    "objectID": "W4_presentation.html#triad-census-1",
    "href": "W4_presentation.html#triad-census-1",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\n\ncompare the triad counts across the two network relations, to see if the patterns differ for friendship compared to advice\n\n\n# `triad.census()` function outputs the counts in each triad type\ntriads_advice &lt;- triad.census(krack_advice) \ntriads_advice\n\n     003 012 102 021D 021U 021C 111D 111U 030T 030C 201 120D 120U 120C 210 300\n[1,]  74 153  90  160   86   49   59  101  190    2  72   62   78   17 107  30"
  },
  {
    "objectID": "W4_presentation.html#triad-census-2",
    "href": "W4_presentation.html#triad-census-2",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\nAnd now for friendship :\n\n# `triad.census()` function outputs the counts in each triad type\ntriads_friendship &lt;- triad.census(krack_friendship)\ntriads_friendship\n\n     003 012 102 021D 021U 021C 111D 111U 030T 030C 201 120D 120U 120C 210 300\n[1,] 376 366 143  114   34   35   39  101   23    0  20   16   25    9  23   6"
  },
  {
    "objectID": "W4_presentation.html#triad-census-3",
    "href": "W4_presentation.html#triad-census-3",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\nLet‚Äôs make a table to make the comparisons easier.\n\ntriad_data &lt;- data.frame(advice = t(triads_advice), \n                         friendship = t(triads_friendship))"
  },
  {
    "objectID": "W4_presentation.html#triad-census-4",
    "href": "W4_presentation.html#triad-census-4",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\n\ntriad_data\n\n     advice friendship\n003      74        376\n012     153        366\n102      90        143\n021D    160        114\n021U     86         34\n021C     49         35\n111D     59         39\n111U    101        101\n030T    190         23\n030C      2          0\n201      72         20\n120D     62         16\n120U     78         25\n120C     17          9\n210     107         23\n300      30          6"
  },
  {
    "objectID": "W4_presentation.html#triad-census-5",
    "href": "W4_presentation.html#triad-census-5",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\n\none striking difference : The advice network has a much higher proportion of 030T triads than the friendship network"
  },
  {
    "objectID": "W4_presentation.html#triad-census-6",
    "href": "W4_presentation.html#triad-census-6",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\n\nThe underlying hierarchy in this advice relation thus runs: A to C to B, as A influences B and C, C influences only B and B influences no one\nSuch a pattern of hierarchy does not emerge as clearly in the friendship network"
  },
  {
    "objectID": "W4_presentation.html#triad-census-7",
    "href": "W4_presentation.html#triad-census-7",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Triad Census",
    "text": "Triad Census\n\nThe triads associated with transitive dominance relations are more likely to be present in the advice network than the friendship network"
  },
  {
    "objectID": "W4_presentation.html#done",
    "href": "W4_presentation.html#done",
    "title": "W4. Ego, Dyads and Triads",
    "section": "Done!",
    "text": "Done!\n\nPlease check KLMS for the assignment of this week(til Friday)\nIf you want to study in-depth knowledge for the ego network, dyad, and triad network, please check this week [Option] in the assignment"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session",
    "href": "W7_presentation.html#setting-up-the-session",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nImport igraph package for network analysis\n\n\nlibrary(igraph)"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-1",
    "href": "W7_presentation.html#setting-up-the-session-1",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nLoad edgelist dataset where there exists social tie between students\n\n\nurl1 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/social_interactions_s641.csv\"\nsocial_data &lt;- read.csv(file = url1)\nedgelist_social &lt;- social_data[social_data$social_tie &gt; 0, ] \nhead(social_data) \n\n  ego alter social_tie\n1   1     1      0.000\n2   1     2      0.000\n3   1     3      0.000\n4   1     4      0.000\n5   1     5      5.625\n6   1     6      1.500"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-2",
    "href": "W7_presentation.html#setting-up-the-session-2",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nCreate a network‚Ä¶ by the way‚Ä¶\n\n\n# Difference?, what does it mean...?\ns641_social &lt;- graph_from_data_frame(d = edgelist_social, directed = T, \n                                     vertices = (id = 1:22))"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-3",
    "href": "W7_presentation.html#setting-up-the-session-3",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nIf you want to delete the all isolated nodes, then,\n\n\nnet641_social_noisolates &lt;- graph_from_data_frame(d = edgelist_social, \n                                                  directed = T)"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-4",
    "href": "W7_presentation.html#setting-up-the-session-4",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nRead in the task data\n\n\nurl2 &lt;- \"https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/task_interactions_s641.csv\"\ntask_data &lt;- read.csv(file = url2)\nhead(task_data)\n\n  ego alter task_tie\n1   1     1        0\n2   1     2        0\n3   1     3        0\n4   1     4        0\n5   1     5        0\n6   1     6        0"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-5",
    "href": "W7_presentation.html#setting-up-the-session-5",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nThe task_tie variable shows the frequency of task-based interactions between nodes i and j\nConstruct task_tie related network, by the way‚Ä¶\n\n\nedgelist_task &lt;- task_data[task_data$task_tie &gt; 0, ] \n# ?????????? (hint, task-tie network would be undirected netwrok...so...?)\nedgelist_task &lt;- edgelist_task[edgelist_task$ego &lt; edgelist_task$alter, ]"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-6",
    "href": "W7_presentation.html#setting-up-the-session-6",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nDelete duplicated edges\nIf there are tie1(2-5) and tie2(5-2), then delete the second tie\nIs it a right way to handle directed edge list data?\n\n\nedgelist_task &lt;- edgelist_task[edgelist_task$ego &lt; edgelist_task$alter, ]\ns641_task &lt;- graph_from_data_frame(d = edgelist_task, directed = F, vertices = (id = 1:22))"
  },
  {
    "objectID": "W7_presentation.html#setting-up-the-session-7",
    "href": "W7_presentation.html#setting-up-the-session-7",
    "title": "W7.Centrality",
    "section": "Setting up the Session",
    "text": "Setting up the Session\n\nplot both networks.\nwhat is the difference between the two networks?\n\n\npar(mfrow = c(1, 2)) \n\nplot(s641_social, vertex.frame.color = NA, edge.arrow.size = .25, vertex.size = 8, main = \"Social Interactions\", margin = -.08)\nplot(s641_task, vertex.frame.color = NA, edge.arrow.size = .25, vertex.size = 8, main = \"Task Interactions\", margin = -.08)"
  },
  {
    "objectID": "W7_presentation.html#centrality-1",
    "href": "W7_presentation.html#centrality-1",
    "title": "W7.Centrality",
    "section": "Centrality",
    "text": "Centrality\n\nCapture something about which nodes are most important to the network\nUsed as predictors of other outcomes, like attitudes, behaviors, etc."
  },
  {
    "objectID": "W7_presentation.html#indegree-centrality",
    "href": "W7_presentation.html#indegree-centrality",
    "title": "W7.Centrality",
    "section": "Indegree Centrality",
    "text": "Indegree Centrality\n\nMeasures how many ties each node receives\nThe number of people that talks to node i in a social way.\n\n\n# 3 people talk to node 1, 1 person talks to node 2\nindegree_social &lt;- degree(graph = s641_social, mode = \"in\")\nindegree_social\n\n 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 \n 3  1  0  1  3  3  1  1  1  2  2  3  0  0  1  5  4  7  5  3  5  6"
  },
  {
    "objectID": "W7_presentation.html#outdegree-centrality",
    "href": "W7_presentation.html#outdegree-centrality",
    "title": "W7.Centrality",
    "section": "Outdegree Centrality",
    "text": "Outdegree Centrality\n\nMeasures how many ties the node sends out\nThe number of people that the node talks to in a social way\n\n\n# node 1 talk to 3 people, node 2 talks to 1 person \noutdegree_social &lt;- degree(graph = s641_social, mode = \"out\")\noutdegree_social\n\n 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 \n 3  1  0  1  3  3  1  1  1  2  1  3  0  0  1  5  4  6  6  3  4  8"
  },
  {
    "objectID": "W7_presentation.html#closeness-centrality",
    "href": "W7_presentation.html#closeness-centrality",
    "title": "W7.Centrality",
    "section": "Closeness Centrality",
    "text": "Closeness Centrality\n\nInverse of the mean distance in shortest path between a given node and all other nodes.\nwhere:\n\\(n\\) is the number of nodes in the network\n\n\\(d(v, u)\\) is the geodesic distance (shortest path length) between node \\(v\\) and node \\(u\\)\n\\[\nC(v) = \\frac{1}{\\frac{1}{n-1} \\sum_{u \\neq v} d(v, u)}\n\\]"
  },
  {
    "objectID": "W7_presentation.html#closeness-centrality-1",
    "href": "W7_presentation.html#closeness-centrality-1",
    "title": "W7.Centrality",
    "section": "Closeness Centrality",
    "text": "Closeness Centrality\n\nInverse of the mean distance from focal node to others\n\n\n# mode = \"in\", or \"out\"\n# normalized = T/F, should scores be normalized? \n# (divided by n-1, where n is the number of people in the network)\noutcloseness_social &lt;- closeness(graph = s641_social, mode = \"out\",\n                                 normalized = T)\noutcloseness_social\n\n        1         2         3         4         5         6         7         8 \n0.4210526 0.3720930       NaN 1.0000000 0.4210526 0.3200000 0.2352941 1.0000000 \n        9        10        11        12        13        14        15        16 \n0.2461538 0.3018868 1.0000000 0.4000000       NaN       NaN 1.0000000 0.5000000 \n       17        18        19        20        21        22 \n0.3809524 0.4210526 0.4848485 0.3720930 0.4571429 0.5714286"
  },
  {
    "objectID": "W7_presentation.html#closeness-centrality-2",
    "href": "W7_presentation.html#closeness-centrality-2",
    "title": "W7.Centrality",
    "section": "Closeness Centrality",
    "text": "Closeness Centrality\n\nInverse of the mean distance from focal node to others\n\n\n# If the network is partially disconnected and some nodes can reach only a few others, \n# the closeness values can be misleading.\noutcloseness_social &lt;- closeness(graph = s641_social, mode = \"out\",\n                                 normalized = T)\noutcloseness_social\n\n        1         2         3         4         5         6         7         8 \n0.4210526 0.3720930       NaN 1.0000000 0.4210526 0.3200000 0.2352941 1.0000000 \n        9        10        11        12        13        14        15        16 \n0.2461538 0.3018868 1.0000000 0.4000000       NaN       NaN 1.0000000 0.5000000 \n       17        18        19        20        21        22 \n0.3809524 0.4210526 0.4848485 0.3720930 0.4571429 0.5714286"
  },
  {
    "objectID": "W7_presentation.html#closeness-centrality-3",
    "href": "W7_presentation.html#closeness-centrality-3",
    "title": "W7.Centrality",
    "section": "Closeness Centrality",
    "text": "Closeness Centrality\n\nInverse of the mean distance from others to focal node\n\n\n# why the closeness centrality is NaN for node 3?\nincloseness_social &lt;- closeness(graph = s641_social, mode = \"in\", \n                                normalized = T)\nincloseness_social\n\n        1         2         3         4         5         6         7         8 \n0.4117647 0.3589744       NaN 1.0000000 0.4117647 0.3181818 0.2456140 1.0000000 \n        9        10        11        12        13        14        15        16 \n0.2456140 0.3181818 0.3809524 0.4242424       NaN       NaN 0.2807018 0.5185185 \n       17        18        19        20        21        22 \n0.4000000 0.5600000 0.4827586 0.3888889 0.4827586 0.5384615"
  },
  {
    "objectID": "W7_presentation.html#closeness-centrality-4",
    "href": "W7_presentation.html#closeness-centrality-4",
    "title": "W7.Centrality",
    "section": "Closeness Centrality",
    "text": "Closeness Centrality\n\ndegree_task &lt;- degree(s641_task)\ndegree_task\n\n 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 \n 1  1  0  1  1  1  1  1  1  1  1  0  2  1  1  2  3  4  3  2  3 17 \n\nclose_task &lt;- closeness(graph = s641_task, normalized = T)\nclose_task\n\n        1         2         3         4         5         6         7         8 \n0.5151515 0.5151515       NaN 1.0000000 0.5151515 0.5151515 0.5151515 1.0000000 \n        9        10        11        12        13        14        15        16 \n0.5151515 0.5151515 0.5151515       NaN 0.5312500 0.5151515 0.5151515 0.5312500 \n       17        18        19        20        21        22 \n0.5483871 0.5666667 0.5483871 0.5312500 0.5483871 1.0000000"
  },
  {
    "objectID": "W7_presentation.html#centralization",
    "href": "W7_presentation.html#centralization",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nBroader perspective!\nLet‚Äôs summarize the distribution of the centrality measures\nExtract stories about in the the network as a whole."
  },
  {
    "objectID": "W7_presentation.html#centralization-1",
    "href": "W7_presentation.html#centralization-1",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nWhat kind of story can we draw from the summary statistics?\n\n\nsummary(indegree_social)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.000   1.000   2.500   2.591   3.750   7.000 \n\nsummary(degree_task)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.000   1.000   1.000   2.182   2.000  17.000 \n\nsd(indegree_social)\n\n[1] 2.03912\n\nsd(degree_task)\n\n[1] 3.459099"
  },
  {
    "objectID": "W7_presentation.html#centralization-2",
    "href": "W7_presentation.html#centralization-2",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nTask network is centered strongly on one node\nSocial interaction network is based more on groups\n\n\nsummary(indegree_social)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.000   1.000   2.500   2.591   3.750   7.000 \n\nsummary(degree_task)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.000   1.000   1.000   2.182   2.000  17.000 \n\nsd(indegree_social)\n\n[1] 2.03912\n\nsd(degree_task)\n\n[1] 3.459099"
  },
  {
    "objectID": "W7_presentation.html#centralization-3",
    "href": "W7_presentation.html#centralization-3",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\ncentr_degree() : Computes degree centrality statistics and network-level centralization\n\\(C_D(v_i)\\) is the degree centrality of node \\(i\\)\n\n\\(C_D(v^*)\\) is the maximum degree centrality observed in the network\n\\[\nC_D(G) =\n\\frac{\\sum_{i=1}^{n} \\left( C_D(v^*) - C_D(v_i) \\right)}\n{\\max \\sum_{i=1}^{n} \\left( C_D(v^*) - C_D(v_i) \\right)}\n\\]"
  },
  {
    "objectID": "W7_presentation.html#centralization-4",
    "href": "W7_presentation.html#centralization-4",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nNumerator : Difference btw max degree centrality and observed centrality for node \\(i\\)\nDenominator :The maximum possible value of Numerator in a graph of size \\(n\\) (i.e., the star graph). \\[\nC_D(G) =\n\\frac{\\sum_{i=1}^{n} \\left( C_D(v^*) - C_D(v_i) \\right)}\n{\\max \\sum_{i=1}^{n} \\left( C_D(v^*) - C_D(v_i) \\right)}\n\\]"
  },
  {
    "objectID": "W7_presentation.html#centralization-5",
    "href": "W7_presentation.html#centralization-5",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\n0 ‚Üí All nodes have similar degrees (no centralization)\n1 ‚Üí One node has all the connections (perfectly centralized) \\[\nC_D(G) =\n\\frac{\\sum_{i=1}^{n} \\left( C_D(v^*) - C_D(v_i) \\right)}\n{\\max \\sum_{i=1}^{n} \\left( C_D(v^*) - C_D(v_i) \\right)}\n\\]"
  },
  {
    "objectID": "W7_presentation.html#centralization-6",
    "href": "W7_presentation.html#centralization-6",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nCalculate indegree centralization for the social interaction network\n\n\n# mode (in, out, total) \n# loops (T/F should self-loops be considered)\n# normalized (T/F should divide by theoretical max?) \ncent_social &lt;- centr_degree(graph = s641_social, mode = \"in\", \n                            loops = FALSE, normalized = TRUE)\ncent_social\n\n$res\n [1] 3 1 0 1 3 3 1 1 1 2 2 3 0 0 1 5 4 7 5 3 5 6\n\n$centralization\n[1] 0.2199546\n\n$theoretical_max\n[1] 441"
  },
  {
    "objectID": "W7_presentation.html#centralization-7",
    "href": "W7_presentation.html#centralization-7",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\nLet‚Äôs apply the same thing for the task network\n\n# Any difference btw social tie and task tie?\ncent_task &lt;- centr_degree(graph = s641_task,\n                          loops = FALSE, normalized = TRUE)\ncent_task\n\n$res\n [1]  1  1  0  1  1  1  1  1  1  1  1  0  2  1  1  2  3  4  3  2  3 17\n\n$centralization\n[1] 0.7761905\n\n$theoretical_max\n[1] 420"
  },
  {
    "objectID": "W7_presentation.html#centralization-8",
    "href": "W7_presentation.html#centralization-8",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nLet‚Äôs compare the two network with degree distribution\nCalculate the density of indegree values from social ties\n\n\n# minumun value of ingree would be 0 so...\nden_social &lt;- density(indegree_social, from = 0) \nden_social\n\n\nCall:\n    density.default(x = indegree_social, from = 0)\n\nData: indegree_social (22 obs.);    Bandwidth 'bw' = 0.989\n\n       x               y            \n Min.   :0.000   Min.   :0.0002118  \n 1st Qu.:2.492   1st Qu.:0.0248385  \n Median :4.984   Median :0.0920633  \n Mean   :4.984   Mean   :0.0890183  \n 3rd Qu.:7.475   3rd Qu.:0.1509740  \n Max.   :9.967   Max.   :0.1785387"
  },
  {
    "objectID": "W7_presentation.html#centralization-9",
    "href": "W7_presentation.html#centralization-9",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nLet‚Äôs compare the two network with degree distribution\nCalculate the density of indegree values from task ties\n\n\nden_task &lt;- density(degree_task, from = 0)\nden_task\n\n\nCall:\n    density.default(x = degree_task, from = 0)\n\nData: degree_task (22 obs.);    Bandwidth 'bw' = 0.362\n\n       x                y          \n Min.   : 0.000   Min.   :0.00000  \n 1st Qu.: 4.521   1st Qu.:0.00000  \n Median : 9.043   Median :0.00000  \n Mean   : 9.043   Mean   :0.05275  \n 3rd Qu.:13.564   3rd Qu.:0.04508  \n Max.   :18.086   Max.   :0.60475"
  },
  {
    "objectID": "W7_presentation.html#centralization-10",
    "href": "W7_presentation.html#centralization-10",
    "title": "W7.Centrality",
    "section": "Centralization",
    "text": "Centralization\n\nPlot the indegree density of two network\n\n\n# what kind of information can we draw from?\nplot(range(den_social$x, den_task$x), range(den_social$y, den_task$y), \n     type = \"n\", xlab = \"degree\", \n     ylab = \"density\", \n     main = \"Degree Distribution for Social and Task Networks\")\n\nlines(den_social, col = \"red\" , lty = 2, lwd = 2)\nlines(den_task, col = \"light blue\", lty = 2, lwd = 2)\n\nlegend(\"topright\", c(\"Social\", \"Task\"),\n       col = c(\"red\", \"light blue\"), lty = 2, lwd = 2)"
  },
  {
    "objectID": "W7_presentation.html#done",
    "href": "W7_presentation.html#done",
    "title": "W7.Centrality",
    "section": "Done!",
    "text": "Done!\n\nPlease check KLMS for the assignment of this week(til Friday)\nIf you want to study in-depth knowledge for centrality and hierarchy with triads, please check this week [Option] in the assignment"
  }
]